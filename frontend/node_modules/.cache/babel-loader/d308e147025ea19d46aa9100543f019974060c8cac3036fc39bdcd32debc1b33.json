{"ast":null,"code":"import _objectSpread from\"/home/anonymous/Downloads/no-broker-kathmandu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{fetchListings}from'../store/slices/listingsSlice';import{fetchVisits,scheduleVisit,cancelVisit}from'../store/slices/visitsSlice';import{fetchFavorites,removeFromFavorites}from'../store/slices/favoritesSlice';import{Link}from'react-router-dom';import{Heart,MapPin,Bed,Bath,Calendar,X,Clock,Search,Star,Wifi,Car,Utensils,Home,Eye,Maximize,Users,TrendingUp,Bookmark,CalendarDays,Settings}from'lucide-react';import{getImageUrl}from'../services/config';import AdModal from'../components/ads/PremiumAdModal';import{useVisitTracker}from'../hooks/useVisitTracker';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TenantDashboardPage=()=>{var _user$full_name;const{user}=useSelector(state=>state.auth);const{listings,loading}=useSelector(state=>state.listings);const{visits,loading:visitsLoading}=useSelector(state=>state.visits);const{favorites,loading:favoritesLoading}=useSelector(state=>state.favorites);const dispatch=useDispatch();const[activeTab,setActiveTab]=useState('browse');const[filters,setFilters]=useState({propertyType:'',minPrice:'',maxPrice:'',location:'',bedrooms:''});const[sortBy,setSortBy]=useState('created_at');const[searchTerm,setSearchTerm]=useState('');// Ad System\nconst{visitCount,showAd,currentAd,trackVisit,markAdAsSeen,skipAd}=useVisitTracker('tenant');useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='tenant'){dispatch(fetchListings(filters));dispatch(fetchVisits());dispatch(fetchFavorites());}},[dispatch,user,filters]);// Track visits for ad system\nuseEffect(()=>{if(activeTab==='browse'){trackVisit();}},[activeTab,trackVisit]);const handleAdClick=async ad=>{try{await fetch(\"/api/ads/\".concat(ad.id,\"/click\"),{method:'POST',headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});if(ad.clickUrl){window.open(ad.clickUrl,'_blank');}}catch(error){console.error('Error tracking ad click:',error);}};const handleScheduleVisit=async listingId=>{try{const visitDate=new Date();visitDate.setDate(visitDate.getDate()+1);// Schedule for tomorrow\nawait dispatch(scheduleVisit({listing_id:listingId,visit_datetime:visitDate.toISOString(),visit_notes:'I would like to schedule a visit for this property.'})).unwrap();alert('Visit scheduled successfully!');}catch(error){console.error('Error scheduling visit:',error);alert(error.message||'Failed to schedule visit');}};const handleCancelVisit=async visitId=>{try{await dispatch(cancelVisit(visitId)).unwrap();alert('Visit cancelled successfully!');}catch(error){console.error('Error cancelling visit:',error);alert(error.message||'Failed to cancel visit');}};const handleRemoveFavorite=async listingId=>{try{await dispatch(removeFromFavorites(listingId)).unwrap();alert('Removed from favorites successfully!');}catch(error){console.error('Error removing from favorites:',error);alert(error.message||'Failed to remove from favorites');}};const filteredListings=listings.filter(listing=>{if(searchTerm&&!listing.title.toLowerCase().includes(searchTerm.toLowerCase())&&!listing.location.toLowerCase().includes(searchTerm.toLowerCase())){return false;}if(filters.propertyType&&listing.property_type!==filters.propertyType)return false;if(filters.minPrice&&listing.price<parseInt(filters.minPrice))return false;if(filters.maxPrice&&listing.price>parseInt(filters.maxPrice))return false;if(filters.location&&!listing.location.toLowerCase().includes(filters.location.toLowerCase()))return false;if(filters.bedrooms&&listing.bedrooms!==parseInt(filters.bedrooms))return false;return true;});const sortedListings=[...filteredListings].sort((a,b)=>{switch(sortBy){case'price_low':return a.price-b.price;case'price_high':return b.price-a.price;case'created_at':return new Date(b.created_at).getTime()-new Date(a.created_at).getTime();default:return 0;}});const formatPrice=price=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'NPR',minimumFractionDigits:0}).format(price).replace('NPR','$');};const getStatusBadge=listing=>{if(!listing.is_active){return{text:'Occupied',color:'bg-gray-500 text-white'};}switch(listing.property_type){case'studio':return{text:'Studio',color:'bg-blue-500 text-white'};case'room':return{text:'Private Room',color:'bg-blue-500 text-white'};case'apartment':return{text:'Available',color:'bg-green-500 text-white'};case'house':return{text:'Available',color:'bg-green-500 text-white'};case'penthouse':return{text:'Suite',color:'bg-purple-500 text-white'};default:return{text:'Available',color:'bg-green-500 text-white'};}};const generateRating=listingId=>{const hash=listingId.split('').reduce((acc,char)=>acc+char.charCodeAt(0),0);const rating=4.0+hash%10/10;const reviewCount=15+hash%30;return{rating:Number(rating.toFixed(1)),reviewCount};};const getAmenityIcons=listing=>{const amenities=[];amenities.push({icon:Wifi,label:'WiFi'});if(['apartment','house','studio'].includes(listing.property_type)){amenities.push({icon:Utensils,label:'Kitchen'});}if(listing.parking_available){amenities.push({icon:Car,label:'Parking'});}if(listing.property_type==='room'){amenities.push({icon:Users,label:'Shared'});amenities.push({icon:Utensils,label:'Kitchen'});}return amenities.slice(0,4);};if(!user||user.role!=='tenant'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"This dashboard is only for tenants.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-center lg:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 lg:mb-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Home,{className:\"w-8 h-8 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl md:text-4xl font-heading font-bold text-gray-900\",children:[\"Welcome back, \",(_user$full_name=user.full_name)===null||_user$full_name===void 0?void 0:_user$full_name.split(' ')[0],\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-gray-600 mt-1\",children:\"Your property journey continues here\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bookmark,{className:\"w-5 h-5 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:favorites.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Saved Properties\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(CalendarDays,{className:\"w-5 h-5 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:visits.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Scheduled Visits\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center\",children:/*#__PURE__*/_jsx(TrendingUp,{className:\"w-5 h-5 text-purple-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900\",children:sortedListings.length}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Available Properties\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/listings\",className:\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 mr-2\"}),\"Browse All Properties\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-white border border-gray-200 hover:border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow hover:shadow-lg flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Settings,{className:\"w-5 h-5 mr-2\"}),\"Preferences\"]})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-2\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"flex space-x-2\",children:[{id:'browse',label:'Browse Properties',icon:Search,count:sortedListings.length},{id:'visits',label:'My Visits',icon:CalendarDays,count:visits.length},{id:'favorites',label:'Favorites',icon:Heart,count:favorites.length}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.id),className:\"flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-semibold text-sm transition-all duration-200 \".concat(activeTab===tab.id?'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg':'text-gray-600 hover:text-gray-900 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(tab.icon,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:tab.label}),tab.count>0&&/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full font-bold \".concat(activeTab===tab.id?'bg-white/20 text-white':'bg-blue-100 text-blue-600'),children:tab.count})]},tab.id))})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100\",children:[activeTab==='browse'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-6 h-6 mr-2 text-blue-600\"}),\"Find Your Perfect Property\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-4 top-4 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by location, property name, or keywords...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 placeholder-gray-500 text-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:filters.propertyType,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{propertyType:e.target.value})),className:\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"room\",children:\"Room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"studio\",children:\"Studio\"}),/*#__PURE__*/_jsx(\"option\",{value:\"penthouse\",children:\"Penthouse\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:filters.bedrooms,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{bedrooms:e.target.value})),className:\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Bedrooms\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 BR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 BR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 BR\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4+ BR\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:filters.location,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{location:e.target.value})),className:\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Min Price\",value:filters.minPrice,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{minPrice:e.target.value})),className:\"w-28 px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Max Price\",value:filters.maxPrice,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{maxPrice:e.target.value})),className:\"w-28 px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at\",children:\"Newest First\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_low\",children:\"Price: Low to High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_high\",children:\"Price: High to Low\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 font-medium\",children:[sortedListings.length,\" properties found\"]}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"text-sm text-blue-600 hover:text-blue-700 font-semibold\",children:\"View All Properties \\u2192\"})]})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})}):sortedListings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(Home,{className:\"w-12 h-12 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"No properties found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Try adjusting your search criteria or browse all properties.\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors font-semibold\",children:\"Browse All Properties\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:sortedListings.slice(0,6).map(listing=>{const statusBadge=getStatusBadge(listing);const{rating,reviewCount}=generateRating(listing.listing_id);const amenities=getAmenityIcons(listing);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative h-64 bg-gray-200 overflow-hidden\",children:[listing.primary_photo?/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(listing.primary_photo),alt:listing.title,className:\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200\",children:/*#__PURE__*/_jsx(Home,{className:\"w-16 h-16 text-gray-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-4 left-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-bold \".concat(statusBadge.color,\" shadow-lg\"),children:statusBadge.text})}),/*#__PURE__*/_jsx(\"button\",{className:\"absolute top-4 right-4 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg group/heart\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 text-red-500 fill-current group-hover/heart:scale-110 transition-transform\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-lg text-xs font-medium flex items-center\",children:[/*#__PURE__*/_jsx(Eye,{className:\"w-3 h-3 mr-1\"}),Math.floor(Math.random()*50)+10]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-900 mb-2 line-clamp-1 group-hover:text-blue-600 transition-colors\",children:listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4 fill-yellow-400 text-yellow-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-gray-700 ml-1\",children:rating})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500\",children:[\"(\",reviewCount,\")\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-2 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:listing.location})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-3 mb-4\",children:amenities.map((amenity,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center text-gray-500\",children:/*#__PURE__*/_jsx(amenity.icon,{className:\"w-4 h-4\"})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm text-gray-600 mb-6\",children:[listing.bedrooms>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:listing.bedrooms})]}),listing.bathrooms>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bath,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:listing.bathrooms})]}),listing.size>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Maximize,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[listing.size,\" sqft\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-4\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-bold text-gray-900\",children:formatPrice(listing.price)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-sm font-medium\",children:\"/month\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleScheduleVisit(listing.listing_id),className:\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),\"Schedule Visit\"]}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(listing.listing_id),className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-semibold transition-all duration-200 text-center flex items-center justify-center\",children:\"View Details\"})]})]})]},listing.listing_id);})}),sortedListings.length>6&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-8\",children:/*#__PURE__*/_jsxs(Link,{to:\"/listings\",className:\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 inline-flex items-center\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 mr-2\"}),\"View All \",sortedListings.length,\" Properties\"]})})]}),activeTab==='visits'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(CalendarDays,{className:\"w-6 h-6 mr-2 text-green-600\"}),\"My Scheduled Visits\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Track your property visits and manage appointments\"})]}),visitsLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):visits.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"You haven't scheduled any visits yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\",children:\"Browse Properties\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:visits.map(visit=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:visit.listing_title||'Property'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:visit.listing_location||'Location not available'})]}),visit.listing_price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-blue-600 mb-2\",children:formatPrice(visit.listing_price)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(visit.status==='completed'?'bg-green-100 text-green-800':visit.status==='scheduled'?'bg-yellow-100 text-yellow-800':visit.status==='cancelled'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:visit.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(visit.visit_datetime).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(visit.visit_datetime).toLocaleTimeString()})]}),visit.owner_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-4 h-4 mr-2\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Owner: \",visit.owner_name]})]})]}),visit.visit_notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-4 italic\",children:[\"\\\"\",visit.visit_notes,\"\\\"\"]}),visit.status==='completed'&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-3 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Visit Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[visit.tenant_decision&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Your decision:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(visit.tenant_decision==='interested'?'text-green-600':visit.tenant_decision==='not_interested'?'text-red-600':'text-yellow-600'),children:visit.tenant_decision.replace('_',' ')})]}),visit.owner_decision&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Owner's decision:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(visit.owner_decision==='interested'?'text-green-600':visit.owner_decision==='not_interested'?'text-red-600':'text-yellow-600'),children:visit.owner_decision.replace('_',' ')})]}),visit.tenant_decision==='interested'&&visit.owner_decision==='interested'&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-blue-600\",children:\"\\uD83C\\uDF89 Match Found!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[visit.status==='scheduled'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelVisit(visit.visit_id),className:\"flex-1 bg-red-100 text-red-700 py-2 px-4 rounded-md hover:bg-red-200 transition-colors text-sm\",children:\"Cancel Visit\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(visit.listing_id),className:\"flex-1 bg-blue-100 text-blue-700 py-2 px-4 rounded-md hover:bg-blue-200 transition-colors text-sm text-center\",children:\"View Property\"})]})]})},visit.visit_id))})]}),activeTab==='favorites'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-6 mb-8\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(Heart,{className:\"w-6 h-6 mr-2 text-pink-600\"}),\"My Favorite Properties\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Properties you've saved for quick access\"})]}),favoritesLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):favorites.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"You haven't added any properties to your favorites yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\",children:\"Browse Properties\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:favorites.map(favorite=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(favorite.listing.primary_photo),alt:favorite.listing.title,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveFavorite(favorite.listing.listing_id),className:\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5 text-red-500\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:favorite.listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:favorite.listing.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:favorite.listing.bedrooms})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bath,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:favorite.listing.bathrooms})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-blue-600\",children:formatPrice(favorite.listing.price)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleScheduleVisit(favorite.listing.listing_id),className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\",children:\"Schedule Visit\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(favorite.listing.listing_id),className:\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\",children:\"View Details\"})]})]})]},favorite.favorite_id))})]})]})]}),/*#__PURE__*/_jsx(AdModal,{isOpen:showAd,onClose:markAdAsSeen,onSkip:skipAd,onAdClick:handleAdClick,ad:currentAd,visitCount:visitCount,userType:\"tenant\"})]});};export default TenantDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","fetchListings","fetchVisits","scheduleVisit","cancelVisit","fetchFavorites","removeFromFavorites","Link","Heart","MapPin","Bed","Bath","Calendar","X","Clock","Search","Star","Wifi","Car","Utensils","Home","Eye","Maximize","Users","TrendingUp","Bookmark","CalendarDays","Settings","getImageUrl","AdModal","useVisitTracker","jsx","_jsx","jsxs","_jsxs","TenantDashboardPage","_user$full_name","user","state","auth","listings","loading","visits","visitsLoading","favorites","favoritesLoading","dispatch","activeTab","setActiveTab","filters","setFilters","propertyType","minPrice","maxPrice","location","bedrooms","sortBy","setSortBy","searchTerm","setSearchTerm","visitCount","showAd","currentAd","trackVisit","markAdAsSeen","skipAd","role","handleAdClick","ad","fetch","concat","id","method","headers","Authorization","localStorage","getItem","clickUrl","window","open","error","console","handleScheduleVisit","listingId","visitDate","Date","setDate","getDate","listing_id","visit_datetime","toISOString","visit_notes","unwrap","alert","message","handleCancelVisit","visitId","handleRemoveFavorite","filteredListings","filter","listing","title","toLowerCase","includes","property_type","price","parseInt","sortedListings","sort","a","b","created_at","getTime","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","format","replace","getStatusBadge","is_active","text","color","generateRating","hash","split","reduce","acc","char","charCodeAt","rating","reviewCount","Number","toFixed","getAmenityIcons","amenities","push","icon","label","parking_available","slice","className","children","full_name","length","to","count","map","tab","onClick","type","placeholder","value","onChange","e","target","prev","_objectSpread","statusBadge","primary_photo","src","alt","Math","floor","random","amenity","index","bathrooms","size","visit","listing_title","listing_location","listing_price","status","toLocaleDateString","toLocaleTimeString","owner_name","tenant_decision","owner_decision","visit_id","favorite","favorite_id","isOpen","onClose","onSkip","onAdClick","userType"],"sources":["/home/anonymous/Downloads/no-broker-kathmandu/frontend/src/pages/TenantDashboardPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState, AppDispatch } from '../store/store';\r\nimport { fetchListings } from '../store/slices/listingsSlice';\r\nimport { fetchVisits, scheduleVisit, cancelVisit } from '../store/slices/visitsSlice';\r\nimport { fetchFavorites, removeFromFavorites } from '../store/slices/favoritesSlice';\r\nimport { Link } from 'react-router-dom';\r\nimport { \r\n  Heart, \r\n  MapPin, \r\n  Bed, \r\n  Bath, \r\n  Calendar, \r\n  X, \r\n  Clock,\r\n  Search,\r\n  Filter,\r\n  Star,\r\n  Wifi,\r\n  Car,\r\n  Utensils,\r\n  Home,\r\n  CheckCircle2,\r\n  Eye,\r\n  Maximize,\r\n  Users,\r\n  TrendingUp,\r\n  Bookmark,\r\n  CalendarDays,\r\n  Settings,\r\n  Bell,\r\n  Activity\r\n} from 'lucide-react';\r\nimport { getImageUrl } from '../services/config';\r\nimport AdModal from '../components/ads/PremiumAdModal';\r\nimport { useVisitTracker } from '../hooks/useVisitTracker';\r\n\r\nconst TenantDashboardPage: React.FC = () => {\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const { listings, loading } = useSelector((state: RootState) => state.listings);\r\n  const { visits, loading: visitsLoading } = useSelector((state: RootState) => state.visits);\r\n  const { favorites, loading: favoritesLoading } = useSelector((state: RootState) => state.favorites);\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  \r\n  const [activeTab, setActiveTab] = useState('browse');\r\n  const [filters, setFilters] = useState({\r\n    propertyType: '',\r\n    minPrice: '',\r\n    maxPrice: '',\r\n    location: '',\r\n    bedrooms: ''\r\n  });\r\n  const [sortBy, setSortBy] = useState('created_at');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  // Ad System\r\n  const { visitCount, showAd, currentAd, trackVisit, markAdAsSeen, skipAd } = useVisitTracker('tenant');\r\n\r\n  useEffect(() => {\r\n    if (user?.role === 'tenant') {\r\n      dispatch(fetchListings(filters));\r\n      dispatch(fetchVisits());\r\n      dispatch(fetchFavorites());\r\n    }\r\n  }, [dispatch, user, filters]);\r\n\r\n  // Track visits for ad system\r\n  useEffect(() => {\r\n    if (activeTab === 'browse') {\r\n      trackVisit();\r\n    }\r\n  }, [activeTab, trackVisit]);\r\n\r\n  const handleAdClick = async (ad: any) => {\r\n    try {\r\n      await fetch(`/api/ads/${ad.id}/click`, {\r\n        method: 'POST',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      \r\n      if (ad.clickUrl) {\r\n        window.open(ad.clickUrl, '_blank');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error tracking ad click:', error);\r\n    }\r\n  };\r\n\r\n  const handleScheduleVisit = async (listingId: string) => {\r\n    try {\r\n      const visitDate = new Date();\r\n      visitDate.setDate(visitDate.getDate() + 1); // Schedule for tomorrow\r\n      \r\n      await dispatch(scheduleVisit({\r\n        listing_id: listingId,\r\n        visit_datetime: visitDate.toISOString(),\r\n        visit_notes: 'I would like to schedule a visit for this property.'\r\n      })).unwrap();\r\n      \r\n      alert('Visit scheduled successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error scheduling visit:', error);\r\n      alert(error.message || 'Failed to schedule visit');\r\n    }\r\n  };\r\n\r\n  const handleCancelVisit = async (visitId: string) => {\r\n    try {\r\n      await dispatch(cancelVisit(visitId)).unwrap();\r\n      alert('Visit cancelled successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error cancelling visit:', error);\r\n      alert(error.message || 'Failed to cancel visit');\r\n    }\r\n  };\r\n\r\n  const handleRemoveFavorite = async (listingId: string) => {\r\n    try {\r\n      await dispatch(removeFromFavorites(listingId)).unwrap();\r\n      alert('Removed from favorites successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error removing from favorites:', error);\r\n      alert(error.message || 'Failed to remove from favorites');\r\n    }\r\n  };\r\n\r\n  const filteredListings = listings.filter(listing => {\r\n    if (searchTerm && !listing.title.toLowerCase().includes(searchTerm.toLowerCase()) && \r\n        !listing.location.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n      return false;\r\n    }\r\n    if (filters.propertyType && listing.property_type !== filters.propertyType) return false;\r\n    if (filters.minPrice && listing.price < parseInt(filters.minPrice)) return false;\r\n    if (filters.maxPrice && listing.price > parseInt(filters.maxPrice)) return false;\r\n    if (filters.location && !listing.location.toLowerCase().includes(filters.location.toLowerCase())) return false;\r\n    if (filters.bedrooms && listing.bedrooms !== parseInt(filters.bedrooms)) return false;\r\n    return true;\r\n  });\r\n\r\n  const sortedListings = [...filteredListings].sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'price_low':\r\n        return a.price - b.price;\r\n      case 'price_high':\r\n        return b.price - a.price;\r\n      case 'created_at':\r\n        return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  const formatPrice = (price: number) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n      style: 'currency',\r\n      currency: 'NPR',\r\n      minimumFractionDigits: 0,\r\n    }).format(price).replace('NPR', '$');\r\n  };\r\n\r\n  const getStatusBadge = (listing: any) => {\r\n    if (!listing.is_active) {\r\n      return { text: 'Occupied', color: 'bg-gray-500 text-white' };\r\n    }\r\n    \r\n    switch (listing.property_type) {\r\n      case 'studio':\r\n        return { text: 'Studio', color: 'bg-blue-500 text-white' };\r\n      case 'room':\r\n        return { text: 'Private Room', color: 'bg-blue-500 text-white' };\r\n      case 'apartment':\r\n        return { text: 'Available', color: 'bg-green-500 text-white' };\r\n      case 'house':\r\n        return { text: 'Available', color: 'bg-green-500 text-white' };\r\n      case 'penthouse':\r\n        return { text: 'Suite', color: 'bg-purple-500 text-white' };\r\n      default:\r\n        return { text: 'Available', color: 'bg-green-500 text-white' };\r\n    }\r\n  };\r\n\r\n  const generateRating = (listingId: string) => {\r\n    const hash = listingId.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);\r\n    const rating = 4.0 + (hash % 10) / 10;\r\n    const reviewCount = 15 + (hash % 30);\r\n    return { rating: Number(rating.toFixed(1)), reviewCount };\r\n  };\r\n\r\n  const getAmenityIcons = (listing: any) => {\r\n    const amenities = [];\r\n    \r\n    amenities.push({ icon: Wifi, label: 'WiFi' });\r\n    \r\n    if (['apartment', 'house', 'studio'].includes(listing.property_type)) {\r\n      amenities.push({ icon: Utensils, label: 'Kitchen' });\r\n    }\r\n    \r\n    if (listing.parking_available) {\r\n      amenities.push({ icon: Car, label: 'Parking' });\r\n    }\r\n    \r\n    if (listing.property_type === 'room') {\r\n      amenities.push({ icon: Users, label: 'Shared' });\r\n      amenities.push({ icon: Utensils, label: 'Kitchen' });\r\n    }\r\n    \r\n    return amenities.slice(0, 4);\r\n  };\r\n\r\n  if (!user || user.role !== 'tenant') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Access Denied</h1>\r\n          <p className=\"text-gray-600\">This dashboard is only for tenants.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n        {/* Modern Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\">\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between\">\r\n              <div className=\"mb-6 lg:mb-0\">\r\n                <div className=\"flex items-center space-x-4 mb-4\">\r\n                  <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center\">\r\n                    <Home className=\"w-8 h-8 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h1 className=\"text-3xl md:text-4xl font-heading font-bold text-gray-900\">\r\n                      Welcome back, {user.full_name?.split(' ')[0]}!\r\n                    </h1>\r\n                    <p className=\"text-lg text-gray-600 mt-1\">\r\n                      Your property journey continues here\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Quick Stats */}\r\n                <div className=\"flex flex-wrap gap-6\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center\">\r\n                      <Bookmark className=\"w-5 h-5 text-blue-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{favorites.length}</p>\r\n                      <p className=\"text-sm text-gray-600\">Saved Properties</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center\">\r\n                      <CalendarDays className=\"w-5 h-5 text-green-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{visits.length}</p>\r\n                      <p className=\"text-sm text-gray-600\">Scheduled Visits</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <div className=\"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center\">\r\n                      <TrendingUp className=\"w-5 h-5 text-purple-600\" />\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{sortedListings.length}</p>\r\n                      <p className=\"text-sm text-gray-600\">Available Properties</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Quick Actions */}\r\n              <div className=\"flex flex-col sm:flex-row gap-3\">\r\n                <Link\r\n                  to=\"/listings\"\r\n                  className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center\"\r\n                >\r\n                  <Search className=\"w-5 h-5 mr-2\" />\r\n                  Browse All Properties\r\n                </Link>\r\n                <button className=\"bg-white border border-gray-200 hover:border-gray-300 text-gray-700 px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow hover:shadow-lg flex items-center justify-center\">\r\n                  <Settings className=\"w-5 h-5 mr-2\" />\r\n                  Preferences\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modern Tabs */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-2\">\r\n            <nav className=\"flex space-x-2\">\r\n              {[\r\n                { id: 'browse', label: 'Browse Properties', icon: Search, count: sortedListings.length },\r\n                { id: 'visits', label: 'My Visits', icon: CalendarDays, count: visits.length },\r\n                { id: 'favorites', label: 'Favorites', icon: Heart, count: favorites.length }\r\n              ].map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-xl font-semibold text-sm transition-all duration-200 ${\r\n                    activeTab === tab.id\r\n                      ? 'bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg'\r\n                      : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  <tab.icon className=\"w-4 h-4\" />\r\n                  <span>{tab.label}</span>\r\n                  {tab.count > 0 && (\r\n                    <span className={`px-2 py-1 text-xs rounded-full font-bold ${\r\n                      activeTab === tab.id ? 'bg-white/20 text-white' : 'bg-blue-100 text-blue-600'\r\n                    }`}>\r\n                      {tab.count}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n              ))}\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100\">\r\n          {/* Browse Properties Tab */}\r\n          {activeTab === 'browse' && (\r\n            <div className=\"p-6\">\r\n              {/* Enhanced Search Section */}\r\n              <div className=\"mb-8\">\r\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center\">\r\n                    <Search className=\"w-6 h-6 mr-2 text-blue-600\" />\r\n                    Find Your Perfect Property\r\n                  </h3>\r\n                  \r\n                  {/* Main Search */}\r\n                  <div className=\"relative mb-4\">\r\n                    <Search className=\"absolute left-4 top-4 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search by location, property name, or keywords...\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"w-full pl-12 pr-4 py-4 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-gray-900 placeholder-gray-500 text-lg\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Filter Pills */}\r\n                  <div className=\"flex flex-wrap gap-3 mb-4\">\r\n                    <select\r\n                      value={filters.propertyType}\r\n                      onChange={(e) => setFilters(prev => ({ ...prev, propertyType: e.target.value }))}\r\n                      className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\"\r\n                    >\r\n                      <option value=\"\">All Types</option>\r\n                      <option value=\"apartment\">Apartment</option>\r\n                      <option value=\"house\">House</option>\r\n                      <option value=\"room\">Room</option>\r\n                      <option value=\"studio\">Studio</option>\r\n                      <option value=\"penthouse\">Penthouse</option>\r\n                    </select>\r\n\r\n                    <select\r\n                      value={filters.bedrooms}\r\n                      onChange={(e) => setFilters(prev => ({ ...prev, bedrooms: e.target.value }))}\r\n                      className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\"\r\n                    >\r\n                      <option value=\"\">Bedrooms</option>\r\n                      <option value=\"1\">1 BR</option>\r\n                      <option value=\"2\">2 BR</option>\r\n                      <option value=\"3\">3 BR</option>\r\n                      <option value=\"4\">4+ BR</option>\r\n                    </select>\r\n\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Location\"\r\n                      value={filters.location}\r\n                      onChange={(e) => setFilters(prev => ({ ...prev, location: e.target.value }))}\r\n                      className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                    />\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <input\r\n                        type=\"number\"\r\n                        placeholder=\"Min Price\"\r\n                        value={filters.minPrice}\r\n                        onChange={(e) => setFilters(prev => ({ ...prev, minPrice: e.target.value }))}\r\n                        className=\"w-28 px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      />\r\n                      <span className=\"text-gray-400\">-</span>\r\n                      <input\r\n                        type=\"number\"\r\n                        placeholder=\"Max Price\"\r\n                        value={filters.maxPrice}\r\n                        onChange={(e) => setFilters(prev => ({ ...prev, maxPrice: e.target.value }))}\r\n                        className=\"w-28 px-3 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\r\n                      />\r\n                    </div>\r\n\r\n                    <select\r\n                      value={sortBy}\r\n                      onChange={(e) => setSortBy(e.target.value)}\r\n                      className=\"px-4 py-2 border border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium\"\r\n                    >\r\n                      <option value=\"created_at\">Newest First</option>\r\n                      <option value=\"price_low\">Price: Low to High</option>\r\n                      <option value=\"price_high\">Price: High to Low</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <p className=\"text-sm text-gray-600 font-medium\">\r\n                      {sortedListings.length} properties found\r\n                    </p>\r\n                    <Link\r\n                      to=\"/listings\"\r\n                      className=\"text-sm text-blue-600 hover:text-blue-700 font-semibold\"\r\n                    >\r\n                      View All Properties \r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Properties Grid */}\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center py-12\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : sortedListings.length === 0 ? (\r\n                <div className=\"text-center py-16\">\r\n                  <div className=\"max-w-md mx-auto\">\r\n                    <div className=\"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                      <Home className=\"w-12 h-12 text-gray-400\" />\r\n                    </div>\r\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No properties found</h3>\r\n                    <p className=\"text-gray-600 mb-6\">\r\n                      Try adjusting your search criteria or browse all properties.\r\n                    </p>\r\n                    <Link\r\n                      to=\"/listings\"\r\n                      className=\"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors font-semibold\"\r\n                    >\r\n                      Browse All Properties\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {sortedListings.slice(0, 6).map((listing) => {\r\n                    const statusBadge = getStatusBadge(listing);\r\n                    const { rating, reviewCount } = generateRating(listing.listing_id);\r\n                    const amenities = getAmenityIcons(listing);\r\n\r\n                    return (\r\n                      <div\r\n                        key={listing.listing_id}\r\n                        className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 group\"\r\n                      >\r\n                        {/* Property Image */}\r\n                        <div className=\"relative h-64 bg-gray-200 overflow-hidden\">\r\n                          {listing.primary_photo ? (\r\n                            <img\r\n                              src={getImageUrl(listing.primary_photo)}\r\n                              alt={listing.title}\r\n                              className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200\">\r\n                              <Home className=\"w-16 h-16 text-gray-400\" />\r\n                            </div>\r\n                          )}\r\n                          \r\n                          {/* Status Badge */}\r\n                          <div className=\"absolute top-4 left-4\">\r\n                            <span className={`px-3 py-1 rounded-full text-xs font-bold ${statusBadge.color} shadow-lg`}>\r\n                              {statusBadge.text}\r\n                            </span>\r\n                          </div>\r\n\r\n                          {/* Favorite Button */}\r\n                          <button className=\"absolute top-4 right-4 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg group/heart\">\r\n                            <Heart className=\"w-5 h-5 text-red-500 fill-current group-hover/heart:scale-110 transition-transform\" />\r\n                          </button>\r\n\r\n                          {/* View Count */}\r\n                          <div className=\"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm text-white px-2 py-1 rounded-lg text-xs font-medium flex items-center\">\r\n                            <Eye className=\"w-3 h-3 mr-1\" />\r\n                            {Math.floor(Math.random() * 50) + 10}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Property Details */}\r\n                        <div className=\"p-6\">\r\n                          {/* Title and Rating */}\r\n                          <div className=\"mb-3\">\r\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-2 line-clamp-1 group-hover:text-blue-600 transition-colors\">\r\n                              {listing.title}\r\n                            </h3>\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                              <div className=\"flex items-center\">\r\n                                <Star className=\"w-4 h-4 fill-yellow-400 text-yellow-400\" />\r\n                                <span className=\"text-sm font-semibold text-gray-700 ml-1\">{rating}</span>\r\n                              </div>\r\n                              <span className=\"text-sm text-gray-500\">({reviewCount})</span>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          {/* Location */}\r\n                          <div className=\"flex items-center text-gray-600 mb-4\">\r\n                            <MapPin className=\"w-4 h-4 mr-2 text-gray-400\" />\r\n                            <span className=\"text-sm font-medium\">{listing.location}</span>\r\n                          </div>\r\n                          \r\n                          {/* Amenities Icons */}\r\n                          <div className=\"flex items-center gap-3 mb-4\">\r\n                            {amenities.map((amenity, index) => (\r\n                              <div key={index} className=\"flex items-center text-gray-500\">\r\n                                <amenity.icon className=\"w-4 h-4\" />\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                          \r\n                          {/* Property Stats */}\r\n                          <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-6\">\r\n                            {listing.bedrooms > 0 && (\r\n                              <div className=\"flex items-center\">\r\n                                <Bed className=\"w-4 h-4 mr-1\" />\r\n                                <span>{listing.bedrooms}</span>\r\n                              </div>\r\n                            )}\r\n                            {listing.bathrooms > 0 && (\r\n                              <div className=\"flex items-center\">\r\n                                <Bath className=\"w-4 h-4 mr-1\" />\r\n                                <span>{listing.bathrooms}</span>\r\n                              </div>\r\n                            )}\r\n                            {listing.size > 0 && (\r\n                              <div className=\"flex items-center\">\r\n                                <Maximize className=\"w-4 h-4 mr-1\" />\r\n                                <span>{listing.size} sqft</span>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                          \r\n                          {/* Price and Actions */}\r\n                          <div className=\"flex items-center justify-between mb-4\">\r\n                            <div>\r\n                              <div className=\"flex items-baseline gap-1\">\r\n                                <span className=\"text-2xl font-bold text-gray-900\">{formatPrice(listing.price)}</span>\r\n                                <span className=\"text-gray-500 text-sm font-medium\">/month</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Action Buttons */}\r\n                          <div className=\"flex gap-2\">\r\n                            <button\r\n                              onClick={() => handleScheduleVisit(listing.listing_id)}\r\n                              className=\"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-4 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center\"\r\n                            >\r\n                              <Calendar className=\"w-4 h-4 mr-2\" />\r\n                              Schedule Visit\r\n                            </button>\r\n                            <Link\r\n                              to={`/listings/${listing.listing_id}`}\r\n                              className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-semibold transition-all duration-200 text-center flex items-center justify-center\"\r\n                            >\r\n                              View Details\r\n                            </Link>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              )}\r\n\r\n              {/* Show More Button */}\r\n              {sortedListings.length > 6 && (\r\n                <div className=\"text-center mt-8\">\r\n                  <Link\r\n                    to=\"/listings\"\r\n                    className=\"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 inline-flex items-center\"\r\n                  >\r\n                    <Search className=\"w-5 h-5 mr-2\" />\r\n                    View All {sortedListings.length} Properties\r\n                  </Link>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Visits Tab */}\r\n          {activeTab === 'visits' && (\r\n            <div className=\"p-6\">\r\n              <div className=\"bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 mb-8\">\r\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2 flex items-center\">\r\n                  <CalendarDays className=\"w-6 h-6 mr-2 text-green-600\" />\r\n                  My Scheduled Visits\r\n                </h3>\r\n                <p className=\"text-gray-600\">Track your property visits and manage appointments</p>\r\n              </div>\r\n              {visitsLoading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : visits.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500 mb-4\">You haven't scheduled any visits yet.</p>\r\n                  <Link\r\n                    to=\"/listings\"\r\n                    className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Browse Properties\r\n                  </Link>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {visits.map((visit) => (\r\n                    <div key={visit.visit_id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                      <div className=\"p-4\">\r\n                        <div className=\"flex items-start justify-between mb-3\">\r\n                          <div className=\"flex-1\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                              {visit.listing_title || 'Property'}\r\n                            </h3>\r\n                            <div className=\"flex items-center text-gray-600 mb-2\">\r\n                              <MapPin className=\"w-4 h-4 mr-1\" />\r\n                              <span className=\"text-sm\">{visit.listing_location || 'Location not available'}</span>\r\n                            </div>\r\n                            {visit.listing_price && (\r\n                              <p className=\"text-lg font-semibold text-blue-600 mb-2\">\r\n                                {formatPrice(visit.listing_price)}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                          <span className={`px-2 py-1 text-xs rounded-full ${\r\n                            visit.status === 'completed' ? 'bg-green-100 text-green-800' :\r\n                            visit.status === 'scheduled' ? 'bg-yellow-100 text-yellow-800' :\r\n                            visit.status === 'cancelled' ? 'bg-red-100 text-red-800' :\r\n                            'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {visit.status}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"space-y-2 mb-4\">\r\n                          <div className=\"flex items-center text-sm text-gray-600\">\r\n                            <Calendar className=\"w-4 h-4 mr-2\" />\r\n                            <span>{new Date(visit.visit_datetime).toLocaleDateString()}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center text-sm text-gray-600\">\r\n                            <Clock className=\"w-4 h-4 mr-2\" />\r\n                            <span>{new Date(visit.visit_datetime).toLocaleTimeString()}</span>\r\n                          </div>\r\n                          {visit.owner_name && (\r\n                            <div className=\"flex items-center text-sm text-gray-600\">\r\n                              <span className=\"w-4 h-4 mr-2\"></span>\r\n                              <span>Owner: {visit.owner_name}</span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {visit.visit_notes && (\r\n                          <p className=\"text-sm text-gray-500 mb-4 italic\">\"{visit.visit_notes}\"</p>\r\n                        )}\r\n\r\n                        {visit.status === 'completed' && (\r\n                          <div className=\"border-t pt-3 mb-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Visit Results</h4>\r\n                            <div className=\"space-y-1\">\r\n                              {visit.tenant_decision && (\r\n                                <p className=\"text-sm\">\r\n                                  <span className=\"text-gray-600\">Your decision:</span>{' '}\r\n                                  <span className={`font-medium ${\r\n                                    visit.tenant_decision === 'interested' ? 'text-green-600' :\r\n                                    visit.tenant_decision === 'not_interested' ? 'text-red-600' :\r\n                                    'text-yellow-600'\r\n                                  }`}>\r\n                                    {visit.tenant_decision.replace('_', ' ')}\r\n                                  </span>\r\n                                </p>\r\n                              )}\r\n                              {visit.owner_decision && (\r\n                                <p className=\"text-sm\">\r\n                                  <span className=\"text-gray-600\">Owner's decision:</span>{' '}\r\n                                  <span className={`font-medium ${\r\n                                    visit.owner_decision === 'interested' ? 'text-green-600' :\r\n                                    visit.owner_decision === 'not_interested' ? 'text-red-600' :\r\n                                    'text-yellow-600'\r\n                                  }`}>\r\n                                    {visit.owner_decision.replace('_', ' ')}\r\n                                  </span>\r\n                                </p>\r\n                              )}\r\n                              {visit.tenant_decision === 'interested' && visit.owner_decision === 'interested' && (\r\n                                <p className=\"text-sm font-medium text-blue-600\"> Match Found!</p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        <div className=\"flex space-x-2\">\r\n                          {visit.status === 'scheduled' && (\r\n                            <button\r\n                              onClick={() => handleCancelVisit(visit.visit_id)}\r\n                              className=\"flex-1 bg-red-100 text-red-700 py-2 px-4 rounded-md hover:bg-red-200 transition-colors text-sm\"\r\n                            >\r\n                              Cancel Visit\r\n                            </button>\r\n                          )}\r\n                          <Link\r\n                            to={`/listings/${visit.listing_id}`}\r\n                            className=\"flex-1 bg-blue-100 text-blue-700 py-2 px-4 rounded-md hover:bg-blue-200 transition-colors text-sm text-center\"\r\n                          >\r\n                            View Property\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Favorites Tab */}\r\n          {activeTab === 'favorites' && (\r\n            <div className=\"p-6\">\r\n              <div className=\"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-6 mb-8\">\r\n                <h3 className=\"text-xl font-bold text-gray-900 mb-2 flex items-center\">\r\n                  <Heart className=\"w-6 h-6 mr-2 text-pink-600\" />\r\n                  My Favorite Properties\r\n                </h3>\r\n                <p className=\"text-gray-600\">Properties you've saved for quick access</p>\r\n              </div>\r\n              {favoritesLoading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : favorites.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500 mb-4\">You haven't added any properties to your favorites yet.</p>\r\n                  <Link\r\n                    to=\"/listings\"\r\n                    className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Browse Properties\r\n                  </Link>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {favorites.map((favorite) => (\r\n                    <div key={favorite.favorite_id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                      <div className=\"relative\">\r\n                        <img\r\n                          src={getImageUrl(favorite.listing.primary_photo)}\r\n                          alt={favorite.listing.title}\r\n                          className=\"w-full h-48 object-cover\"\r\n                        />\r\n                        <div className=\"absolute top-2 right-2\">\r\n                          <button\r\n                            onClick={() => handleRemoveFavorite(favorite.listing.listing_id)}\r\n                            className=\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\"\r\n                          >\r\n                            <X className=\"w-5 h-5 text-red-500\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"p-4\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{favorite.listing.title}</h3>\r\n                        <div className=\"flex items-center text-gray-600 mb-2\">\r\n                          <MapPin className=\"w-4 h-4 mr-1\" />\r\n                          <span className=\"text-sm\">{favorite.listing.location}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                            <div className=\"flex items-center\">\r\n                              <Bed className=\"w-4 h-4 mr-1\" />\r\n                              <span>{favorite.listing.bedrooms}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                              <Bath className=\"w-4 h-4 mr-1\" />\r\n                              <span>{favorite.listing.bathrooms}</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-lg font-semibold text-blue-600\">\r\n                            {formatPrice(favorite.listing.price)}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleScheduleVisit(favorite.listing.listing_id)}\r\n                            className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\"\r\n                          >\r\n                            Schedule Visit\r\n                          </button>\r\n                          <Link\r\n                            to={`/listings/${favorite.listing.listing_id}`}\r\n                            className=\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\"\r\n                          >\r\n                            View Details\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Ad Modal */}\r\n      <AdModal\r\n        isOpen={showAd}\r\n        onClose={markAdAsSeen}\r\n        onSkip={skipAd}\r\n        onAdClick={handleAdClick}\r\n        ad={currentAd}\r\n        visitCount={visitCount}\r\n        userType=\"tenant\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TenantDashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}