{"ast":null,"code":"import _objectSpread from\"/home/anonymous/Downloads/no-broker-kathmandu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{fetchListings}from'../store/slices/listingsSlice';import{fetchVisits,scheduleVisit,cancelVisit}from'../store/slices/visitsSlice';import{fetchFavorites,removeFromFavorites}from'../store/slices/favoritesSlice';import{Link}from'react-router-dom';import{Heart,MapPin,Bed,Bath,Calendar,X,Clock}from'lucide-react';import{getImageUrl}from'../services/config';import AdModal from'../components/ads/PremiumAdModal';import{useVisitTracker}from'../hooks/useVisitTracker';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TenantDashboardPage=()=>{const{user}=useSelector(state=>state.auth);const{listings,loading}=useSelector(state=>state.listings);const{visits,loading:visitsLoading}=useSelector(state=>state.visits);const{favorites,loading:favoritesLoading}=useSelector(state=>state.favorites);const dispatch=useDispatch();const[activeTab,setActiveTab]=useState('browse');const[filters,setFilters]=useState({propertyType:'',minPrice:'',maxPrice:'',location:'',bedrooms:''});const[sortBy,setSortBy]=useState('created_at');const[searchTerm,setSearchTerm]=useState('');// Ad System\nconst{visitCount,showAd,currentAd,trackVisit,markAdAsSeen,skipAd}=useVisitTracker('tenant');useEffect(()=>{if((user===null||user===void 0?void 0:user.role)==='tenant'){dispatch(fetchListings(filters));dispatch(fetchVisits());dispatch(fetchFavorites());}},[dispatch,user,filters]);// Track visits for ad system\nuseEffect(()=>{if(activeTab==='browse'){trackVisit();}},[activeTab,trackVisit]);const handleAdClick=async ad=>{try{await fetch(\"/api/ads/\".concat(ad.id,\"/click\"),{method:'POST',headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});if(ad.clickUrl){window.open(ad.clickUrl,'_blank');}}catch(error){console.error('Error tracking ad click:',error);}};const handleScheduleVisit=async listingId=>{try{const visitDate=new Date();visitDate.setDate(visitDate.getDate()+1);// Schedule for tomorrow\nawait dispatch(scheduleVisit({listing_id:listingId,visit_datetime:visitDate.toISOString(),visit_notes:'I would like to schedule a visit for this property.'})).unwrap();alert('Visit scheduled successfully!');}catch(error){console.error('Error scheduling visit:',error);alert(error.message||'Failed to schedule visit');}};const handleCancelVisit=async visitId=>{try{await dispatch(cancelVisit(visitId)).unwrap();alert('Visit cancelled successfully!');}catch(error){console.error('Error cancelling visit:',error);alert(error.message||'Failed to cancel visit');}};const handleRemoveFavorite=async listingId=>{try{await dispatch(removeFromFavorites(listingId)).unwrap();alert('Removed from favorites successfully!');}catch(error){console.error('Error removing from favorites:',error);alert(error.message||'Failed to remove from favorites');}};const filteredListings=listings.filter(listing=>{if(searchTerm&&!listing.title.toLowerCase().includes(searchTerm.toLowerCase())&&!listing.location.toLowerCase().includes(searchTerm.toLowerCase())){return false;}if(filters.propertyType&&listing.property_type!==filters.propertyType)return false;if(filters.minPrice&&listing.price<parseInt(filters.minPrice))return false;if(filters.maxPrice&&listing.price>parseInt(filters.maxPrice))return false;if(filters.location&&!listing.location.toLowerCase().includes(filters.location.toLowerCase()))return false;if(filters.bedrooms&&listing.bedrooms!==parseInt(filters.bedrooms))return false;return true;});const sortedListings=[...filteredListings].sort((a,b)=>{switch(sortBy){case'price_low':return a.price-b.price;case'price_high':return b.price-a.price;case'created_at':return new Date(b.created_at).getTime()-new Date(a.created_at).getTime();default:return 0;}});const formatPrice=price=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'NPR',minimumFractionDigits:0}).format(price);};if(!user||user.role!=='tenant'){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-4\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"This dashboard is only for tenants.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Tenant Dashboard\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-2\",children:[\"Welcome back, \",user.full_name,\"!\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('browse'),className:\"py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='browse'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:\"Browse Properties\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('visits'),className:\"py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='visits'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[\"My Visits (\",visits.length,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('favorites'),className:\"py-2 px-1 border-b-2 font-medium text-sm \".concat(activeTab==='favorites'?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[\"Favorites (\",favorites.length,\")\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow\",children:[activeTab==='browse'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search properties...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"})}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"created_at\",children:\"Newest First\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_low\",children:\"Price: Low to High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price_high\",children:\"Price: High to Low\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-5 gap-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:filters.propertyType,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{propertyType:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Types\"}),/*#__PURE__*/_jsx(\"option\",{value:\"apartment\",children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"house\",children:\"House\"}),/*#__PURE__*/_jsx(\"option\",{value:\"room\",children:\"Room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"studio\",children:\"Studio\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Min Price\",value:filters.minPrice,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{minPrice:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Max Price\",value:filters.maxPrice,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{maxPrice:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:filters.location,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{location:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:filters.bedrooms,onChange:e=>setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{bedrooms:e.target.value})),className:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Any Bedrooms\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"1 Bedroom\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 Bedrooms\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3 Bedrooms\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4+ Bedrooms\"})]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):sortedListings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No properties found matching your criteria.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:sortedListings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(listing.primary_photo),alt:listing.title,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveFavorite(listing.listing_id),className:\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5 text-red-500 fill-current\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:listing.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:listing.bedrooms})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bath,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:listing.bathrooms})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-blue-600\",children:formatPrice(listing.price)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleScheduleVisit(listing.listing_id),className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\",children:\"Schedule Visit\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(listing.listing_id),className:\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\",children:\"View Details\"})]})]})]},listing.listing_id))})]}),activeTab==='visits'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"My Scheduled Visits\"}),visitsLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):visits.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"You haven't scheduled any visits yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\",children:\"Browse Properties\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:visits.map(visit=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-1\",children:visit.listing_title||'Property'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:visit.listing_location||'Location not available'})]}),visit.listing_price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-semibold text-blue-600 mb-2\",children:formatPrice(visit.listing_price)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs rounded-full \".concat(visit.status==='completed'?'bg-green-100 text-green-800':visit.status==='scheduled'?'bg-yellow-100 text-yellow-800':visit.status==='cancelled'?'bg-red-100 text-red-800':'bg-gray-100 text-gray-800'),children:visit.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(visit.visit_datetime).toLocaleDateString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-4 h-4 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(visit.visit_datetime).toLocaleTimeString()})]}),visit.owner_name&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-4 h-4 mr-2\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Owner: \",visit.owner_name]})]})]}),visit.visit_notes&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-4 italic\",children:[\"\\\"\",visit.visit_notes,\"\\\"\"]}),visit.status==='completed'&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-3 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Visit Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[visit.tenant_decision&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Your decision:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(visit.tenant_decision==='interested'?'text-green-600':visit.tenant_decision==='not_interested'?'text-red-600':'text-yellow-600'),children:visit.tenant_decision.replace('_',' ')})]}),visit.owner_decision&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Owner's decision:\"}),' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(visit.owner_decision==='interested'?'text-green-600':visit.owner_decision==='not_interested'?'text-red-600':'text-yellow-600'),children:visit.owner_decision.replace('_',' ')})]}),visit.tenant_decision==='interested'&&visit.owner_decision==='interested'&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-blue-600\",children:\"\\uD83C\\uDF89 Match Found!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[visit.status==='scheduled'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCancelVisit(visit.visit_id),className:\"flex-1 bg-red-100 text-red-700 py-2 px-4 rounded-md hover:bg-red-200 transition-colors text-sm\",children:\"Cancel Visit\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(visit.listing_id),className:\"flex-1 bg-blue-100 text-blue-700 py-2 px-4 rounded-md hover:bg-blue-200 transition-colors text-sm text-center\",children:\"View Property\"})]})]})},visit.visit_id))})]}),activeTab==='favorites'&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"My Favorite Properties\"}),favoritesLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):favorites.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"You haven't added any properties to your favorites yet.\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings\",className:\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\",children:\"Browse Properties\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:favorites.map(favorite=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(favorite.listing.primary_photo),alt:favorite.listing.title,className:\"w-full h-48 object-cover\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 right-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveFavorite(favorite.listing.listing_id),className:\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5 text-red-500\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:favorite.listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:favorite.listing.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bed,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:favorite.listing.bedrooms})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Bath,{className:\"w-4 h-4 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:favorite.listing.bathrooms})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-semibold text-blue-600\",children:formatPrice(favorite.listing.price)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleScheduleVisit(favorite.listing.listing_id),className:\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\",children:\"Schedule Visit\"}),/*#__PURE__*/_jsx(Link,{to:\"/listings/\".concat(favorite.listing.listing_id),className:\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\",children:\"View Details\"})]})]})]},favorite.favorite_id))})]})]})]}),/*#__PURE__*/_jsx(AdModal,{isOpen:showAd,onClose:markAdAsSeen,onSkip:skipAd,onAdClick:handleAdClick,ad:currentAd,visitCount:visitCount,userType:\"tenant\"})]});};export default TenantDashboardPage;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","fetchListings","fetchVisits","scheduleVisit","cancelVisit","fetchFavorites","removeFromFavorites","Link","Heart","MapPin","Bed","Bath","Calendar","X","Clock","getImageUrl","AdModal","useVisitTracker","jsx","_jsx","jsxs","_jsxs","TenantDashboardPage","user","state","auth","listings","loading","visits","visitsLoading","favorites","favoritesLoading","dispatch","activeTab","setActiveTab","filters","setFilters","propertyType","minPrice","maxPrice","location","bedrooms","sortBy","setSortBy","searchTerm","setSearchTerm","visitCount","showAd","currentAd","trackVisit","markAdAsSeen","skipAd","role","handleAdClick","ad","fetch","concat","id","method","headers","Authorization","localStorage","getItem","clickUrl","window","open","error","console","handleScheduleVisit","listingId","visitDate","Date","setDate","getDate","listing_id","visit_datetime","toISOString","visit_notes","unwrap","alert","message","handleCancelVisit","visitId","handleRemoveFavorite","filteredListings","filter","listing","title","toLowerCase","includes","property_type","price","parseInt","sortedListings","sort","a","b","created_at","getTime","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","format","className","children","full_name","onClick","length","type","placeholder","value","onChange","e","target","prev","_objectSpread","map","src","primary_photo","alt","bathrooms","to","visit","listing_title","listing_location","listing_price","status","toLocaleDateString","toLocaleTimeString","owner_name","tenant_decision","replace","owner_decision","visit_id","favorite","favorite_id","isOpen","onClose","onSkip","onAdClick","userType"],"sources":["/home/anonymous/Downloads/no-broker-kathmandu/frontend/src/pages/TenantDashboardPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { RootState, AppDispatch } from '../store/store';\r\nimport { fetchListings } from '../store/slices/listingsSlice';\r\nimport { fetchVisits, scheduleVisit, cancelVisit } from '../store/slices/visitsSlice';\r\nimport { fetchFavorites, removeFromFavorites } from '../store/slices/favoritesSlice';\r\nimport { Link } from 'react-router-dom';\r\nimport { Heart, MapPin, Bed, Bath, DollarSign, Calendar, X, Clock } from 'lucide-react';\r\nimport { getImageUrl } from '../services/config';\r\nimport AdModal from '../components/ads/PremiumAdModal';\r\nimport { useVisitTracker } from '../hooks/useVisitTracker';\r\n\r\nconst TenantDashboardPage: React.FC = () => {\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const { listings, loading } = useSelector((state: RootState) => state.listings);\r\n  const { visits, loading: visitsLoading } = useSelector((state: RootState) => state.visits);\r\n  const { favorites, loading: favoritesLoading } = useSelector((state: RootState) => state.favorites);\r\n  const dispatch = useDispatch<AppDispatch>();\r\n  \r\n  const [activeTab, setActiveTab] = useState('browse');\r\n  const [filters, setFilters] = useState({\r\n    propertyType: '',\r\n    minPrice: '',\r\n    maxPrice: '',\r\n    location: '',\r\n    bedrooms: ''\r\n  });\r\n  const [sortBy, setSortBy] = useState('created_at');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  // Ad System\r\n  const { visitCount, showAd, currentAd, trackVisit, markAdAsSeen, skipAd } = useVisitTracker('tenant');\r\n\r\n  useEffect(() => {\r\n    if (user?.role === 'tenant') {\r\n      dispatch(fetchListings(filters));\r\n      dispatch(fetchVisits());\r\n      dispatch(fetchFavorites());\r\n    }\r\n  }, [dispatch, user, filters]);\r\n\r\n  // Track visits for ad system\r\n  useEffect(() => {\r\n    if (activeTab === 'browse') {\r\n      trackVisit();\r\n    }\r\n  }, [activeTab, trackVisit]);\r\n\r\n  const handleAdClick = async (ad: any) => {\r\n    try {\r\n      await fetch(`/api/ads/${ad.id}/click`, {\r\n        method: 'POST',\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      \r\n      if (ad.clickUrl) {\r\n        window.open(ad.clickUrl, '_blank');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error tracking ad click:', error);\r\n    }\r\n  };\r\n\r\n  const handleScheduleVisit = async (listingId: string) => {\r\n    try {\r\n      const visitDate = new Date();\r\n      visitDate.setDate(visitDate.getDate() + 1); // Schedule for tomorrow\r\n      \r\n      await dispatch(scheduleVisit({\r\n        listing_id: listingId,\r\n        visit_datetime: visitDate.toISOString(),\r\n        visit_notes: 'I would like to schedule a visit for this property.'\r\n      })).unwrap();\r\n      \r\n      alert('Visit scheduled successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error scheduling visit:', error);\r\n      alert(error.message || 'Failed to schedule visit');\r\n    }\r\n  };\r\n\r\n  const handleCancelVisit = async (visitId: string) => {\r\n    try {\r\n      await dispatch(cancelVisit(visitId)).unwrap();\r\n      alert('Visit cancelled successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error cancelling visit:', error);\r\n      alert(error.message || 'Failed to cancel visit');\r\n    }\r\n  };\r\n\r\n  const handleRemoveFavorite = async (listingId: string) => {\r\n    try {\r\n      await dispatch(removeFromFavorites(listingId)).unwrap();\r\n      alert('Removed from favorites successfully!');\r\n    } catch (error: any) {\r\n      console.error('Error removing from favorites:', error);\r\n      alert(error.message || 'Failed to remove from favorites');\r\n    }\r\n  };\r\n\r\n  const filteredListings = listings.filter(listing => {\r\n    if (searchTerm && !listing.title.toLowerCase().includes(searchTerm.toLowerCase()) && \r\n        !listing.location.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n      return false;\r\n    }\r\n    if (filters.propertyType && listing.property_type !== filters.propertyType) return false;\r\n    if (filters.minPrice && listing.price < parseInt(filters.minPrice)) return false;\r\n    if (filters.maxPrice && listing.price > parseInt(filters.maxPrice)) return false;\r\n    if (filters.location && !listing.location.toLowerCase().includes(filters.location.toLowerCase())) return false;\r\n    if (filters.bedrooms && listing.bedrooms !== parseInt(filters.bedrooms)) return false;\r\n    return true;\r\n  });\r\n\r\n  const sortedListings = [...filteredListings].sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'price_low':\r\n        return a.price - b.price;\r\n      case 'price_high':\r\n        return b.price - a.price;\r\n      case 'created_at':\r\n        return new Date(b.created_at).getTime() - new Date(a.created_at).getTime();\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n\r\n  const formatPrice = (price: number) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n      style: 'currency',\r\n      currency: 'NPR',\r\n      minimumFractionDigits: 0,\r\n    }).format(price);\r\n  };\r\n\r\n  if (!user || user.role !== 'tenant') {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Access Denied</h1>\r\n          <p className=\"text-gray-600\">This dashboard is only for tenants.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Tenant Dashboard</h1>\r\n          <p className=\"text-gray-600 mt-2\">Welcome back, {user.full_name}!</p>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"mb-6\">\r\n          <nav className=\"flex space-x-8\">\r\n            <button\r\n              onClick={() => setActiveTab('browse')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'browse'\r\n                  ? 'border-blue-500 text-blue-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              Browse Properties\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('visits')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'visits'\r\n                  ? 'border-blue-500 text-blue-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              My Visits ({visits.length})\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('favorites')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === 'favorites'\r\n                  ? 'border-blue-500 text-blue-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              Favorites ({favorites.length})\r\n            </button>\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"bg-white rounded-lg shadow\">\r\n          {/* Browse Properties Tab */}\r\n          {activeTab === 'browse' && (\r\n            <div className=\"p-6\">\r\n              {/* Search and Filters */}\r\n              <div className=\"mb-6\">\r\n                <div className=\"flex flex-col md:flex-row gap-4 mb-4\">\r\n                  <div className=\"flex-1\">\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Search properties...\"\r\n                      value={searchTerm}\r\n                      onChange={(e) => setSearchTerm(e.target.value)}\r\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    />\r\n                  </div>\r\n                  <select\r\n                    value={sortBy}\r\n                    onChange={(e) => setSortBy(e.target.value)}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"created_at\">Newest First</option>\r\n                    <option value=\"price_low\">Price: Low to High</option>\r\n                    <option value=\"price_high\">Price: High to Low</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\r\n                  <select\r\n                    value={filters.propertyType}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, propertyType: e.target.value }))}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"\">All Types</option>\r\n                    <option value=\"apartment\">Apartment</option>\r\n                    <option value=\"house\">House</option>\r\n                    <option value=\"room\">Room</option>\r\n                    <option value=\"studio\">Studio</option>\r\n                  </select>\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Min Price\"\r\n                    value={filters.minPrice}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, minPrice: e.target.value }))}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    placeholder=\"Max Price\"\r\n                    value={filters.maxPrice}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, maxPrice: e.target.value }))}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Location\"\r\n                    value={filters.location}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, location: e.target.value }))}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  />\r\n                  <select\r\n                    value={filters.bedrooms}\r\n                    onChange={(e) => setFilters(prev => ({ ...prev, bedrooms: e.target.value }))}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"\">Any Bedrooms</option>\r\n                    <option value=\"1\">1 Bedroom</option>\r\n                    <option value=\"2\">2 Bedrooms</option>\r\n                    <option value=\"3\">3 Bedrooms</option>\r\n                    <option value=\"4\">4+ Bedrooms</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Properties Grid */}\r\n              {loading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : sortedListings.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500\">No properties found matching your criteria.</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {sortedListings.map((listing) => (\r\n                    <div key={listing.listing_id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                      <div className=\"relative\">\r\n                        <img\r\n                          src={getImageUrl(listing.primary_photo)}\r\n                          alt={listing.title}\r\n                          className=\"w-full h-48 object-cover\"\r\n                        />\r\n                        <div className=\"absolute top-2 right-2\">\r\n                          <button\r\n                            onClick={() => handleRemoveFavorite(listing.listing_id)}\r\n                            className=\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\"\r\n                          >\r\n                            <Heart className=\"w-5 h-5 text-red-500 fill-current\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"p-4\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{listing.title}</h3>\r\n                        <div className=\"flex items-center text-gray-600 mb-2\">\r\n                          <MapPin className=\"w-4 h-4 mr-1\" />\r\n                          <span className=\"text-sm\">{listing.location}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                            <div className=\"flex items-center\">\r\n                              <Bed className=\"w-4 h-4 mr-1\" />\r\n                              <span>{listing.bedrooms}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                              <Bath className=\"w-4 h-4 mr-1\" />\r\n                              <span>{listing.bathrooms}</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-lg font-semibold text-blue-600\">\r\n                            {formatPrice(listing.price)}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleScheduleVisit(listing.listing_id)}\r\n                            className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\"\r\n                          >\r\n                            Schedule Visit\r\n                          </button>\r\n                          <Link\r\n                            to={`/listings/${listing.listing_id}`}\r\n                            className=\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\"\r\n                          >\r\n                            View Details\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Visits Tab */}\r\n          {activeTab === 'visits' && (\r\n            <div className=\"p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">My Scheduled Visits</h3>\r\n              {visitsLoading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : visits.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500 mb-4\">You haven't scheduled any visits yet.</p>\r\n                  <Link\r\n                    to=\"/listings\"\r\n                    className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Browse Properties\r\n                  </Link>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {visits.map((visit) => (\r\n                    <div key={visit.visit_id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                      <div className=\"p-4\">\r\n                        <div className=\"flex items-start justify-between mb-3\">\r\n                          <div className=\"flex-1\">\r\n                            <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                              {visit.listing_title || 'Property'}\r\n                            </h3>\r\n                            <div className=\"flex items-center text-gray-600 mb-2\">\r\n                              <MapPin className=\"w-4 h-4 mr-1\" />\r\n                              <span className=\"text-sm\">{visit.listing_location || 'Location not available'}</span>\r\n                            </div>\r\n                            {visit.listing_price && (\r\n                              <p className=\"text-lg font-semibold text-blue-600 mb-2\">\r\n                                {formatPrice(visit.listing_price)}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                          <span className={`px-2 py-1 text-xs rounded-full ${\r\n                            visit.status === 'completed' ? 'bg-green-100 text-green-800' :\r\n                            visit.status === 'scheduled' ? 'bg-yellow-100 text-yellow-800' :\r\n                            visit.status === 'cancelled' ? 'bg-red-100 text-red-800' :\r\n                            'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {visit.status}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"space-y-2 mb-4\">\r\n                          <div className=\"flex items-center text-sm text-gray-600\">\r\n                            <Calendar className=\"w-4 h-4 mr-2\" />\r\n                            <span>{new Date(visit.visit_datetime).toLocaleDateString()}</span>\r\n                          </div>\r\n                          <div className=\"flex items-center text-sm text-gray-600\">\r\n                            <Clock className=\"w-4 h-4 mr-2\" />\r\n                            <span>{new Date(visit.visit_datetime).toLocaleTimeString()}</span>\r\n                          </div>\r\n                          {visit.owner_name && (\r\n                            <div className=\"flex items-center text-sm text-gray-600\">\r\n                              <span className=\"w-4 h-4 mr-2\">ðŸ‘¤</span>\r\n                              <span>Owner: {visit.owner_name}</span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        {visit.visit_notes && (\r\n                          <p className=\"text-sm text-gray-500 mb-4 italic\">\"{visit.visit_notes}\"</p>\r\n                        )}\r\n\r\n                        {visit.status === 'completed' && (\r\n                          <div className=\"border-t pt-3 mb-4\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Visit Results</h4>\r\n                            <div className=\"space-y-1\">\r\n                              {visit.tenant_decision && (\r\n                                <p className=\"text-sm\">\r\n                                  <span className=\"text-gray-600\">Your decision:</span>{' '}\r\n                                  <span className={`font-medium ${\r\n                                    visit.tenant_decision === 'interested' ? 'text-green-600' :\r\n                                    visit.tenant_decision === 'not_interested' ? 'text-red-600' :\r\n                                    'text-yellow-600'\r\n                                  }`}>\r\n                                    {visit.tenant_decision.replace('_', ' ')}\r\n                                  </span>\r\n                                </p>\r\n                              )}\r\n                              {visit.owner_decision && (\r\n                                <p className=\"text-sm\">\r\n                                  <span className=\"text-gray-600\">Owner's decision:</span>{' '}\r\n                                  <span className={`font-medium ${\r\n                                    visit.owner_decision === 'interested' ? 'text-green-600' :\r\n                                    visit.owner_decision === 'not_interested' ? 'text-red-600' :\r\n                                    'text-yellow-600'\r\n                                  }`}>\r\n                                    {visit.owner_decision.replace('_', ' ')}\r\n                                  </span>\r\n                                </p>\r\n                              )}\r\n                              {visit.tenant_decision === 'interested' && visit.owner_decision === 'interested' && (\r\n                                <p className=\"text-sm font-medium text-blue-600\">ðŸŽ‰ Match Found!</p>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        <div className=\"flex space-x-2\">\r\n                          {visit.status === 'scheduled' && (\r\n                            <button\r\n                              onClick={() => handleCancelVisit(visit.visit_id)}\r\n                              className=\"flex-1 bg-red-100 text-red-700 py-2 px-4 rounded-md hover:bg-red-200 transition-colors text-sm\"\r\n                            >\r\n                              Cancel Visit\r\n                            </button>\r\n                          )}\r\n                          <Link\r\n                            to={`/listings/${visit.listing_id}`}\r\n                            className=\"flex-1 bg-blue-100 text-blue-700 py-2 px-4 rounded-md hover:bg-blue-200 transition-colors text-sm text-center\"\r\n                          >\r\n                            View Property\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Favorites Tab */}\r\n          {activeTab === 'favorites' && (\r\n            <div className=\"p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">My Favorite Properties</h3>\r\n              {favoritesLoading ? (\r\n                <div className=\"flex justify-center items-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                </div>\r\n              ) : favorites.length === 0 ? (\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-gray-500 mb-4\">You haven't added any properties to your favorites yet.</p>\r\n                  <Link\r\n                    to=\"/listings\"\r\n                    className=\"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors\"\r\n                  >\r\n                    Browse Properties\r\n                  </Link>\r\n                </div>\r\n              ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                  {favorites.map((favorite) => (\r\n                    <div key={favorite.favorite_id} className=\"bg-white border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow\">\r\n                      <div className=\"relative\">\r\n                        <img\r\n                          src={getImageUrl(favorite.listing.primary_photo)}\r\n                          alt={favorite.listing.title}\r\n                          className=\"w-full h-48 object-cover\"\r\n                        />\r\n                        <div className=\"absolute top-2 right-2\">\r\n                          <button\r\n                            onClick={() => handleRemoveFavorite(favorite.listing.listing_id)}\r\n                            className=\"bg-white rounded-full p-2 shadow-md hover:bg-gray-50\"\r\n                          >\r\n                            <X className=\"w-5 h-5 text-red-500\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"p-4\">\r\n                        <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{favorite.listing.title}</h3>\r\n                        <div className=\"flex items-center text-gray-600 mb-2\">\r\n                          <MapPin className=\"w-4 h-4 mr-1\" />\r\n                          <span className=\"text-sm\">{favorite.listing.location}</span>\r\n                        </div>\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                            <div className=\"flex items-center\">\r\n                              <Bed className=\"w-4 h-4 mr-1\" />\r\n                              <span>{favorite.listing.bedrooms}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                              <Bath className=\"w-4 h-4 mr-1\" />\r\n                              <span>{favorite.listing.bathrooms}</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"text-lg font-semibold text-blue-600\">\r\n                            {formatPrice(favorite.listing.price)}\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleScheduleVisit(favorite.listing.listing_id)}\r\n                            className=\"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors\"\r\n                          >\r\n                            Schedule Visit\r\n                          </button>\r\n                          <Link\r\n                            to={`/listings/${favorite.listing.listing_id}`}\r\n                            className=\"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors text-center\"\r\n                          >\r\n                            View Details\r\n                          </Link>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Ad Modal */}\r\n      <AdModal\r\n        isOpen={showAd}\r\n        onClose={markAdAsSeen}\r\n        onSkip={skipAd}\r\n        onAdClick={handleAdClick}\r\n        ad={currentAd}\r\n        visitCount={visitCount}\r\n        userType=\"tenant\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TenantDashboardPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}