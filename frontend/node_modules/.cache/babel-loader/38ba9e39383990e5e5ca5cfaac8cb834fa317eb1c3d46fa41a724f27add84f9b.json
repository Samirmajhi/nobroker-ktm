{"ast":null,"code":"import _objectSpread from\"/home/anonymous/Downloads/no-broker-kathmandu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useSelector}from'react-redux';import{Send,Paperclip,Smile,MoreVertical,Phone,Video,Info,Check,CheckCheck}from'lucide-react';import messagingService from'../../services/messagingService';import{motion,AnimatePresence}from'framer-motion';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatInterface=_ref=>{let{conversationId,otherParticipant,listingId}=_ref;const{user}=useSelector(state=>state.auth);const[messages,setMessages]=useState([]);const[newMessage,setNewMessage]=useState('');const[loading,setLoading]=useState(false);const[isTyping,setIsTyping]=useState(false);const[showOptions,setShowOptions]=useState(false);const messagesEndRef=useRef(null);const typingTimeoutRef=useRef();const fileInputRef=useRef(null);useEffect(()=>{fetchMessages();setupRealTimeMessaging();return()=>{// Cleanup real-time handlers\nmessagingService.disconnect();};},[conversationId]);useEffect(()=>{scrollToBottom();},[messages]);const setupRealTimeMessaging=()=>{messagingService.connect();// Handle new messages\nconst unsubscribeMessage=messagingService.onNewMessage(message=>{if(message.conversation_id===conversationId){setMessages(prev=>[...prev,message]);// Mark as read if we're the receiver\nif(message.sender_id!==(user===null||user===void 0?void 0:user.user_id)){markMessageAsRead();}}});// Handle typing indicators\nconst unsubscribeTyping=messagingService.onTyping(data=>{if(data.conversationId===conversationId){setIsTyping(data.isTyping);}});// Handle read receipts\nconst unsubscribeReadReceipt=messagingService.onReadReceipt(data=>{if(data.conversationId===conversationId){setMessages(prev=>prev.map(msg=>msg.sender_id===(user===null||user===void 0?void 0:user.user_id)?_objectSpread(_objectSpread({},msg),{},{is_read:true}):msg));}});return()=>{unsubscribeMessage();unsubscribeTyping();unsubscribeReadReceipt();};};const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const fetchMessages=async()=>{try{setLoading(true);const token=localStorage.getItem('token');const response=await fetch(\"http://localhost:5000/api/messages/conversations/\".concat(conversationId,\"/messages\"),{headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});if(response.ok){const data=await response.json();setMessages(data.messages||[]);}}catch(error){console.error('Error fetching messages:',error);toast.error('Failed to load messages');}finally{setLoading(false);}};const sendMessage=async e=>{e.preventDefault();if(!newMessage.trim())return;try{const token=localStorage.getItem('token');const response=await fetch(\"http://localhost:5000/api/messages/conversations/\".concat(conversationId,\"/messages\"),{method:'POST',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'},body:JSON.stringify({messageText:newMessage.trim(),messageType:'text'})});if(response.ok){const data=await response.json();setMessages(prev=>[...prev,data.message]);setNewMessage('');// Send via real-time\nmessagingService.sendMessage(conversationId,newMessage.trim(),otherParticipant.id,listingId);// Mark as read\nmarkMessageAsRead();}}catch(error){console.error('Error sending message:',error);toast.error('Failed to send message');}};const markMessageAsRead=async()=>{try{const token=localStorage.getItem('token');await fetch(\"http://localhost:5000/api/messages/conversations/\".concat(conversationId,\"/read\"),{method:'PUT',headers:{'Authorization':\"Bearer \".concat(token),'Content-Type':'application/json'}});}catch(error){console.error('Error marking messages as read:',error);}};const handleTyping=e=>{setNewMessage(e.target.value);// Handle typing indicators\nif(e.target.value.length>0){messagingService.startTyping(conversationId,otherParticipant.id);if(typingTimeoutRef.current){clearTimeout(typingTimeoutRef.current);}typingTimeoutRef.current=setTimeout(()=>{messagingService.stopTyping(conversationId,otherParticipant.id);},1000);}else{messagingService.stopTyping(conversationId,otherParticipant.id);}};const formatTime=timestamp=>{const date=new Date(timestamp);const now=new Date();const diffInHours=(now.getTime()-date.getTime())/(1000*60*60);if(diffInHours<24){return date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});}else if(diffInHours<168){// 7 days\nreturn date.toLocaleDateString([],{weekday:'short'});}else{return date.toLocaleDateString([],{month:'short',day:'numeric'});}};const handleFileUpload=e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){// Handle file upload logic here\ntoast.success('File upload feature coming soon!');}};const isOwnMessage=message=>message.sender_id===(user===null||user===void 0?void 0:user.user_id);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-full bg-gradient-to-br from-gray-50 to-white\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:\"flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg\",children:otherParticipant.avatar?/*#__PURE__*/_jsx(\"img\",{src:otherParticipant.avatar,alt:otherParticipant.name,className:\"w-12 h-12 rounded-full object-cover\"}):otherParticipant.name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900 text-lg\",children:otherParticipant.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:otherParticipant.role==='owner'?'Property Owner':'Tenant'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-green-500 text-xs\",children:\"\\u25CF Online\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Video,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Info,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowOptions(!showOptions),className:\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors relative\",children:/*#__PURE__*/_jsx(MoreVertical,{className:\"w-5 h-5\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-gray-50 to-white\",children:[loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-full\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):/*#__PURE__*/_jsx(AnimatePresence,{children:messages.map((message,index)=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:\"flex \".concat(isOwnMessage(message)?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end space-x-2 max-w-xs lg:max-w-md\",children:[!isOwnMessage(message)&&/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white text-sm font-medium flex-shrink-0\",children:message.sender_avatar?/*#__PURE__*/_jsx(\"img\",{src:message.sender_avatar,alt:message.sender_name,className:\"w-8 h-8 rounded-full object-cover\"}):message.sender_name.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 rounded-2xl shadow-sm \".concat(isOwnMessage(message)?'bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-br-md':'bg-white text-gray-900 border border-gray-200 rounded-bl-md'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm leading-relaxed\",children:message.message_text}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 space-x-2 \".concat(isOwnMessage(message)?'text-blue-100':'text-gray-500'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:formatTime(message.created_at)}),isOwnMessage(message)&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-1\",children:message.is_read?/*#__PURE__*/_jsx(CheckCheck,{className:\"w-4 h-4 text-blue-200\"}):/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 text-blue-200\"})})]})]})]})},message.message_id))}),isTyping&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"flex justify-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 px-4 py-2 bg-white rounded-2xl border border-gray-200 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"typing...\"})]})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(motion.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:sendMessage,className:\"p-4 border-t border-gray-200 bg-white shadow-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"p-3 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Paperclip,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:handleTyping,placeholder:\"Type a message...\",className:\"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\",children:/*#__PURE__*/_jsx(Smile,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!newMessage.trim(),className:\"p-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",onChange:handleFileUpload,className:\"hidden\",accept:\"image/*,.pdf,.doc,.docx\"})]})]});};export default ChatInterface;","map":{"version":3,"names":["React","useState","useEffect","useRef","useSelector","Send","Paperclip","Smile","MoreVertical","Phone","Video","Info","Check","CheckCheck","messagingService","motion","AnimatePresence","toast","jsx","_jsx","jsxs","_jsxs","ChatInterface","_ref","conversationId","otherParticipant","listingId","user","state","auth","messages","setMessages","newMessage","setNewMessage","loading","setLoading","isTyping","setIsTyping","showOptions","setShowOptions","messagesEndRef","typingTimeoutRef","fileInputRef","fetchMessages","setupRealTimeMessaging","disconnect","scrollToBottom","connect","unsubscribeMessage","onNewMessage","message","conversation_id","prev","sender_id","user_id","markMessageAsRead","unsubscribeTyping","onTyping","data","unsubscribeReadReceipt","onReadReceipt","map","msg","_objectSpread","is_read","_messagesEndRef$curre","current","scrollIntoView","behavior","token","localStorage","getItem","response","fetch","concat","headers","ok","json","error","console","sendMessage","e","preventDefault","trim","method","body","JSON","stringify","messageText","messageType","id","handleTyping","target","value","length","startTyping","clearTimeout","setTimeout","stopTyping","formatTime","timestamp","date","Date","now","diffInHours","getTime","toLocaleTimeString","hour","minute","toLocaleDateString","weekday","month","day","handleFileUpload","_e$target$files","file","files","success","isOwnMessage","className","children","div","initial","opacity","y","animate","avatar","src","alt","name","charAt","toUpperCase","role","onClick","index","transition","delay","sender_avatar","sender_name","message_text","created_at","message_id","style","animationDelay","ref","form","onSubmit","type","_fileInputRef$current","click","onChange","placeholder","disabled","accept"],"sources":["/home/anonymous/Downloads/no-broker-kathmandu/frontend/src/components/messaging/ChatInterface.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../store/store';\r\nimport { Send, Paperclip, Smile, MoreVertical, Phone, Video, Info, Check, CheckCheck } from 'lucide-react';\r\nimport messagingService, { Message as ChatMessage } from '../../services/messagingService';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'react-hot-toast';\r\n\r\ninterface ChatInterfaceProps {\r\n  conversationId: string;\r\n  otherParticipant: {\r\n    name: string;\r\n    avatar?: string;\r\n    id: string;\r\n    role?: string;\r\n  };\r\n  listingId: string;\r\n}\r\n\r\nconst ChatInterface: React.FC<ChatInterfaceProps> = ({ conversationId, otherParticipant, listingId }) => {\r\n  const { user } = useSelector((state: RootState) => state.auth);\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const typingTimeoutRef = useRef<NodeJS.Timeout>();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    setupRealTimeMessaging();\r\n    return () => {\r\n      // Cleanup real-time handlers\r\n      messagingService.disconnect();\r\n    };\r\n  }, [conversationId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const setupRealTimeMessaging = () => {\r\n    messagingService.connect();\r\n\r\n    // Handle new messages\r\n    const unsubscribeMessage = messagingService.onNewMessage((message) => {\r\n      if (message.conversation_id === conversationId) {\r\n        setMessages(prev => [...prev, message]);\r\n        // Mark as read if we're the receiver\r\n        if (message.sender_id !== user?.user_id) {\r\n          markMessageAsRead();\r\n        }\r\n      }\r\n    });\r\n\r\n    // Handle typing indicators\r\n    const unsubscribeTyping = messagingService.onTyping((data) => {\r\n      if (data.conversationId === conversationId) {\r\n        setIsTyping(data.isTyping);\r\n      }\r\n    });\r\n\r\n    // Handle read receipts\r\n    const unsubscribeReadReceipt = messagingService.onReadReceipt((data) => {\r\n      if (data.conversationId === conversationId) {\r\n        setMessages(prev => \r\n          prev.map(msg => \r\n            msg.sender_id === user?.user_id ? { ...msg, is_read: true } : msg\r\n          )\r\n        );\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribeMessage();\r\n      unsubscribeTyping();\r\n      unsubscribeReadReceipt();\r\n    };\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const fetchMessages = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:5000/api/messages/conversations/${conversationId}/messages`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMessages(data.messages || []);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching messages:', error);\r\n      toast.error('Failed to load messages');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const sendMessage = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim()) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await fetch(`http://localhost:5000/api/messages/conversations/${conversationId}/messages`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          messageText: newMessage.trim(),\r\n          messageType: 'text'\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setMessages(prev => [...prev, data.message]);\r\n        setNewMessage('');\r\n        \r\n        // Send via real-time\r\n        messagingService.sendMessage(conversationId, newMessage.trim(), otherParticipant.id, listingId);\r\n        \r\n        // Mark as read\r\n        markMessageAsRead();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      toast.error('Failed to send message');\r\n    }\r\n  };\r\n\r\n  const markMessageAsRead = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await fetch(`http://localhost:5000/api/messages/conversations/${conversationId}/read`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Error marking messages as read:', error);\r\n    }\r\n  };\r\n\r\n  const handleTyping = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setNewMessage(e.target.value);\r\n    \r\n    // Handle typing indicators\r\n    if (e.target.value.length > 0) {\r\n      messagingService.startTyping(conversationId, otherParticipant.id);\r\n      \r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n      \r\n      typingTimeoutRef.current = setTimeout(() => {\r\n        messagingService.stopTyping(conversationId, otherParticipant.id);\r\n      }, 1000);\r\n    } else {\r\n      messagingService.stopTyping(conversationId, otherParticipant.id);\r\n    }\r\n  };\r\n\r\n  const formatTime = (timestamp: string) => {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diffInHours = (now.getTime() - date.getTime()) / (1000 * 60 * 60);\r\n\r\n    if (diffInHours < 24) {\r\n      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n    } else if (diffInHours < 168) { // 7 days\r\n      return date.toLocaleDateString([], { weekday: 'short' });\r\n    } else {\r\n      return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\r\n    }\r\n  };\r\n\r\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      // Handle file upload logic here\r\n      toast.success('File upload feature coming soon!');\r\n    }\r\n  };\r\n\r\n  const isOwnMessage = (message: ChatMessage) => message.sender_id === user?.user_id;\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-gradient-to-br from-gray-50 to-white\">\r\n      {/* Chat Header */}\r\n      <motion.div \r\n        initial={{ opacity: 0, y: -20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm\"\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"relative\">\r\n            <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg\">\r\n              {otherParticipant.avatar ? (\r\n                <img \r\n                  src={otherParticipant.avatar} \r\n                  alt={otherParticipant.name}\r\n                  className=\"w-12 h-12 rounded-full object-cover\"\r\n                />\r\n              ) : (\r\n                otherParticipant.name.charAt(0).toUpperCase()\r\n              )}\r\n            </div>\r\n            <div className=\"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full\"></div>\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-900 text-lg\">{otherParticipant.name}</h3>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-sm text-gray-500\">\r\n                {otherParticipant.role === 'owner' ? 'Property Owner' : 'Tenant'}\r\n              </span>\r\n              <span className=\"text-green-500 text-xs\">● Online</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center space-x-2\">\r\n          <button className=\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\">\r\n            <Phone className=\"w-5 h-5\" />\r\n          </button>\r\n          <button className=\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\">\r\n            <Video className=\"w-5 h-5\" />\r\n          </button>\r\n          <button className=\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\">\r\n            <Info className=\"w-5 h-5\" />\r\n          </button>\r\n          <button \r\n            onClick={() => setShowOptions(!showOptions)}\r\n            className=\"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors relative\"\r\n          >\r\n            <MoreVertical className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n      </motion.div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gradient-to-b from-gray-50 to-white\">\r\n        {loading ? (\r\n          <div className=\"flex justify-center items-center h-full\">\r\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n          </div>\r\n        ) : (\r\n          <AnimatePresence>\r\n            {messages.map((message, index) => (\r\n              <motion.div\r\n                key={message.message_id}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: index * 0.1 }}\r\n                className={`flex ${isOwnMessage(message) ? 'justify-end' : 'justify-start'}`}\r\n              >\r\n                <div className=\"flex items-end space-x-2 max-w-xs lg:max-w-md\">\r\n                  {!isOwnMessage(message) && (\r\n                    <div className=\"w-8 h-8 bg-gradient-to-br from-gray-400 to-gray-600 rounded-full flex items-center justify-center text-white text-sm font-medium flex-shrink-0\">\r\n                      {message.sender_avatar ? (\r\n                        <img \r\n                          src={message.sender_avatar} \r\n                          alt={message.sender_name}\r\n                          className=\"w-8 h-8 rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        message.sender_name.charAt(0).toUpperCase()\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div\r\n                    className={`px-4 py-3 rounded-2xl shadow-sm ${\r\n                      isOwnMessage(message)\r\n                        ? 'bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-br-md'\r\n                        : 'bg-white text-gray-900 border border-gray-200 rounded-bl-md'\r\n                    }`}\r\n                  >\r\n                    <p className=\"text-sm leading-relaxed\">{message.message_text}</p>\r\n                    <div className={`flex items-center justify-between mt-2 space-x-2 ${\r\n                      isOwnMessage(message) ? 'text-blue-100' : 'text-gray-500'\r\n                    }`}>\r\n                      <span className=\"text-xs\">\r\n                        {formatTime(message.created_at)}\r\n                      </span>\r\n                      {isOwnMessage(message) && (\r\n                        <div className=\"flex items-center space-x-1\">\r\n                          {message.is_read ? (\r\n                            <CheckCheck className=\"w-4 h-4 text-blue-200\" />\r\n                          ) : (\r\n                            <Check className=\"w-4 h-4 text-blue-200\" />\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </AnimatePresence>\r\n        )}\r\n        \r\n        {/* Typing Indicator */}\r\n        {isTyping && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"flex justify-start\"\r\n          >\r\n            <div className=\"flex items-center space-x-2 px-4 py-2 bg-white rounded-2xl border border-gray-200 shadow-sm\">\r\n              <div className=\"flex space-x-1\">\r\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\r\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\r\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n              </div>\r\n              <span className=\"text-xs text-gray-500\">typing...</span>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n        \r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Message Input */}\r\n      <motion.form \r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        onSubmit={sendMessage} \r\n        className=\"p-4 border-t border-gray-200 bg-white shadow-lg\"\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => fileInputRef.current?.click()}\r\n            className=\"p-3 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\"\r\n          >\r\n            <Paperclip className=\"w-5 h-5\" />\r\n          </button>\r\n          \r\n          <div className=\"flex-1 relative\">\r\n            <input\r\n              type=\"text\"\r\n              value={newMessage}\r\n              onChange={handleTyping}\r\n              placeholder=\"Type a message...\"\r\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 placeholder-gray-400\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              className=\"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-colors\"\r\n            >\r\n              <Smile className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={!newMessage.trim()}\r\n            className=\"p-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-full hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105 disabled:transform-none\"\r\n          >\r\n            <Send className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n        \r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          onChange={handleFileUpload}\r\n          className=\"hidden\"\r\n          accept=\"image/*,.pdf,.doc,.docx\"\r\n        />\r\n      </motion.form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterface;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}