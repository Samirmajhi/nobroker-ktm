{"ast":null,"code":"import _objectSpread from\"/home/anonymous/Downloads/no-broker-kathmandu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{authService}from'../../services/authService';const initialState={user:null,token:localStorage.getItem('token'),isAuthenticated:!!localStorage.getItem('token'),isLoading:false,loading:false,// Add this for backward compatibility\nerror:null};// Async thunks\nexport const login=createAsyncThunk('auth/login',async(credentials,_ref)=>{let{rejectWithValue}=_ref;try{const response=await authService.login(credentials);localStorage.setItem('token',response.token);// Ensure the user object has all required properties\nconst user={user_id:response.user.user_id,full_name:response.user.full_name,email:response.user.email,phone:response.user.phone,role:response.user.role,kyc_status:response.user.kyc_status,profile_picture_url:response.user.profile_picture_url,email_verified:response.user.email_verified,phone_verified:response.user.phone_verified,created_at:response.user.created_at};return{user,token:response.token};}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed');}});export const register=createAsyncThunk('auth/register',async(userData,_ref2)=>{let{rejectWithValue}=_ref2;try{const response=await authService.register(userData);localStorage.setItem('token',response.token);// Ensure the user object has all required properties\nconst user={user_id:response.user.user_id,full_name:response.user.full_name,email:response.user.email,phone:response.user.phone,role:response.user.role,kyc_status:response.user.kyc_status,profile_picture_url:response.user.profile_picture_url,email_verified:response.user.email_verified,phone_verified:response.user.phone_verified,created_at:response.user.created_at};return{user,token:response.token};}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Registration failed');}});export const getProfile=createAsyncThunk('auth/getProfile',async(_,_ref3)=>{let{rejectWithValue}=_ref3;try{const response=await authService.getProfile();// Ensure the user object has all required properties\nconst user={user_id:response.user.user_id,full_name:response.user.full_name,email:response.user.email,phone:response.user.phone,role:response.user.role,kyc_status:response.user.kyc_status,profile_picture_url:response.user.profile_picture_url,email_verified:response.user.email_verified,phone_verified:response.user.phone_verified,created_at:response.user.created_at};return user;}catch(error){var _error$response3,_error$response3$data;return rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to fetch profile');}});export const updateProfile=createAsyncThunk('auth/updateProfile',async(profileData,_ref4)=>{let{rejectWithValue}=_ref4;try{const response=await authService.updateProfile(profileData);// Ensure the user object has all required properties\nconst user={user_id:response.user.user_id,full_name:response.user.full_name,email:response.user.email,phone:response.user.phone,role:response.user.role,kyc_status:response.user.kyc_status,profile_picture_url:response.user.profile_picture_url,email_verified:response.user.email_verified,phone_verified:response.user.phone_verified,created_at:response.user.created_at};return user;}catch(error){var _error$response4,_error$response4$data;return rejectWithValue(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to update profile');}});export const changePassword=createAsyncThunk('auth/changePassword',async(passwordData,_ref5)=>{let{rejectWithValue}=_ref5;try{await authService.changePassword(passwordData);}catch(error){var _error$response5,_error$response5$data;return rejectWithValue(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'Failed to change password');}});export const logout=createAsyncThunk('auth/logout',async()=>{localStorage.removeItem('token');return null;});// New action for staff login that bypasses the normal login flow\nexport const staffLogin=createAsyncThunk('auth/staffLogin',async data=>{// For staff login, we already have the user data and token\n// Just return them to update the state\nreturn data;});// SSO login action for handling OAuth callbacks\nexport const ssoLogin=createAsyncThunk('auth/ssoLogin',async(token,_ref6)=>{let{rejectWithValue}=_ref6;try{// Set token in localStorage\nlocalStorage.setItem('token',token);// Get user profile\nconst response=await authService.getProfile();return response.user;}catch(error){var _error$response6,_error$response6$data;return rejectWithValue(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.error)||'SSO login failed');}});const authSlice=createSlice({name:'auth',initialState,reducers:{clearError:state=>{state.error=null;},setToken:(state,action)=>{state.token=action.payload;state.isAuthenticated=true;localStorage.setItem('token',action.payload);},clearToken:state=>{state.token=null;state.isAuthenticated=false;localStorage.removeItem('token');},updateUser:(state,action)=>{if(state.user){state.user=_objectSpread(_objectSpread({},state.user),action.payload);}}},extraReducers:builder=>{builder// Login\n.addCase(login.pending,state=>{state.isLoading=true;state.error=null;}).addCase(login.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.isAuthenticated=true;state.user=action.payload.user;state.token=action.payload.token;state.error=null;}).addCase(login.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Register\n.addCase(register.pending,state=>{state.isLoading=true;state.error=null;}).addCase(register.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.isAuthenticated=true;state.user=action.payload.user;state.token=action.payload.token;state.error=null;}).addCase(register.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Get Profile\n.addCase(getProfile.pending,state=>{state.isLoading=true;state.error=null;}).addCase(getProfile.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.user=action.payload;state.error=null;}).addCase(getProfile.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Update Profile\n.addCase(updateProfile.pending,state=>{state.isLoading=true;state.error=null;}).addCase(updateProfile.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.user=action.payload;state.error=null;}).addCase(updateProfile.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Change Password\n.addCase(changePassword.pending,state=>{state.isLoading=true;state.error=null;}).addCase(changePassword.fulfilled,state=>{state.isLoading=false;state.loading=false;state.error=null;}).addCase(changePassword.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Logout\n.addCase(logout.fulfilled,state=>{state.user=null;state.token=null;state.isAuthenticated=false;state.error=null;})// Staff Login\n.addCase(staffLogin.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.isAuthenticated=true;state.user=action.payload.user;state.token=action.payload.token;state.error=null;})// SSO Login\n.addCase(ssoLogin.pending,state=>{state.isLoading=true;state.error=null;}).addCase(ssoLogin.fulfilled,(state,action)=>{state.isLoading=false;state.loading=false;state.isAuthenticated=true;state.user=action.payload;state.token=localStorage.getItem('token');state.error=null;}).addCase(ssoLogin.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;});}});export const{clearError,setToken,clearToken,updateUser}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","initialState","user","token","localStorage","getItem","isAuthenticated","isLoading","loading","error","login","credentials","_ref","rejectWithValue","response","setItem","user_id","full_name","email","phone","role","kyc_status","profile_picture_url","email_verified","phone_verified","created_at","_error$response","_error$response$data","data","register","userData","_ref2","_error$response2","_error$response2$data","getProfile","_","_ref3","_error$response3","_error$response3$data","updateProfile","profileData","_ref4","_error$response4","_error$response4$data","changePassword","passwordData","_ref5","_error$response5","_error$response5$data","logout","removeItem","staffLogin","ssoLogin","_ref6","_error$response6","_error$response6$data","authSlice","name","reducers","clearError","state","setToken","action","payload","clearToken","updateUser","_objectSpread","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["/home/anonymous/Downloads/no-broker-kathmandu/frontend/src/store/slices/authSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\r\nimport { authService } from '../../services/authService';\r\nimport { AsyncThunkConfig } from '../store';\r\n\r\nexport interface User {\r\n  user_id: string;\r\n  full_name: string;\r\n  email: string;\r\n  phone: string;\r\n  role: 'tenant' | 'owner' | 'staff' | 'admin';\r\n  kyc_status: 'pending' | 'verified' | 'rejected';\r\n  profile_picture_url?: string;\r\n  email_verified: boolean;\r\n  phone_verified: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface AuthState {\r\n  user: User | null;\r\n  token: string | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  loading: boolean; // Add this for backward compatibility\r\n  error: string | null;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n  user: null,\r\n  token: localStorage.getItem('token'),\r\n  isAuthenticated: !!localStorage.getItem('token'),\r\n  isLoading: false,\r\n  loading: false, // Add this for backward compatibility\r\n  error: null,\r\n};\r\n\r\n// Async thunks\r\nexport const login = createAsyncThunk<\r\n  { user: User; token: string },\r\n  { email: string; password: string },\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/login',\r\n  async (credentials, { rejectWithValue }) => {\r\n    try {\r\n      const response = await authService.login(credentials);\r\n      localStorage.setItem('token', response.token);\r\n      // Ensure the user object has all required properties\r\n      const user: User = {\r\n        user_id: response.user.user_id,\r\n        full_name: response.user.full_name,\r\n        email: response.user.email,\r\n        phone: response.user.phone,\r\n        role: response.user.role,\r\n        kyc_status: response.user.kyc_status,\r\n        profile_picture_url: response.user.profile_picture_url,\r\n        email_verified: response.user.email_verified,\r\n        phone_verified: response.user.phone_verified,\r\n        created_at: response.user.created_at,\r\n      };\r\n      return { user, token: response.token };\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'Login failed');\r\n    }\r\n  }\r\n);\r\n\r\nexport const register = createAsyncThunk<\r\n  { user: User; token: string },\r\n  {\r\n    fullName: string;\r\n    email: string;\r\n    phone: string;\r\n    password: string;\r\n    role: 'tenant' | 'owner' | 'staff';\r\n  },\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/register',\r\n  async (userData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await authService.register(userData);\r\n      localStorage.setItem('token', response.token);\r\n      // Ensure the user object has all required properties\r\n      const user: User = {\r\n        user_id: response.user.user_id,\r\n        full_name: response.user.full_name,\r\n        email: response.user.email,\r\n        phone: response.user.phone,\r\n        role: response.user.role,\r\n        kyc_status: response.user.kyc_status,\r\n        profile_picture_url: response.user.profile_picture_url,\r\n        email_verified: response.user.email_verified,\r\n        phone_verified: response.user.phone_verified,\r\n        created_at: response.user.created_at,\r\n      };\r\n      return { user, token: response.token };\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'Registration failed');\r\n    }\r\n  }\r\n);\r\n\r\nexport const getProfile = createAsyncThunk<\r\n  User,\r\n  void,\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/getProfile',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const response = await authService.getProfile();\r\n      // Ensure the user object has all required properties\r\n      const user: User = {\r\n        user_id: response.user.user_id,\r\n        full_name: response.user.full_name,\r\n        email: response.user.email,\r\n        phone: response.user.phone,\r\n        role: response.user.role,\r\n        kyc_status: response.user.kyc_status,\r\n        profile_picture_url: response.user.profile_picture_url,\r\n        email_verified: response.user.email_verified,\r\n        phone_verified: response.user.phone_verified,\r\n        created_at: response.user.created_at,\r\n      };\r\n      return user;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'Failed to fetch profile');\r\n    }\r\n  }\r\n);\r\n\r\nexport const updateProfile = createAsyncThunk<\r\n  User,\r\n  {\r\n    fullName?: string;\r\n    phone?: string;\r\n    profilePictureUrl?: string;\r\n  },\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/updateProfile',\r\n  async (profileData, { rejectWithValue }) => {\r\n    try {\r\n      const response = await authService.updateProfile(profileData);\r\n      // Ensure the user object has all required properties\r\n      const user: User = {\r\n        user_id: response.user.user_id,\r\n        full_name: response.user.full_name,\r\n        email: response.user.email,\r\n        phone: response.user.phone,\r\n        role: response.user.role,\r\n        kyc_status: response.user.kyc_status,\r\n        profile_picture_url: response.user.profile_picture_url,\r\n        email_verified: response.user.email_verified,\r\n        phone_verified: response.user.phone_verified,\r\n        created_at: response.user.created_at,\r\n      };\r\n      return user;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'Failed to update profile');\r\n    }\r\n  }\r\n);\r\n\r\nexport const changePassword = createAsyncThunk<\r\n  void,\r\n  {\r\n    currentPassword: string;\r\n    newPassword: string;\r\n  },\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/changePassword',\r\n  async (passwordData, { rejectWithValue }) => {\r\n    try {\r\n      await authService.changePassword(passwordData);\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'Failed to change password');\r\n    }\r\n  }\r\n);\r\n\r\nexport const logout = createAsyncThunk<\r\n  null,\r\n  void,\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/logout',\r\n  async () => {\r\n    localStorage.removeItem('token');\r\n    return null;\r\n  }\r\n);\r\n\r\n// New action for staff login that bypasses the normal login flow\r\nexport const staffLogin = createAsyncThunk<\r\n  { user: User; token: string },\r\n  { user: User; token: string },\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/staffLogin',\r\n  async (data) => {\r\n    // For staff login, we already have the user data and token\r\n    // Just return them to update the state\r\n    return data;\r\n  }\r\n);\r\n\r\n// SSO login action for handling OAuth callbacks\r\nexport const ssoLogin = createAsyncThunk<\r\n  User,\r\n  string, // token\r\n  AsyncThunkConfig\r\n>(\r\n  'auth/ssoLogin',\r\n  async (token, { rejectWithValue }) => {\r\n    try {\r\n      // Set token in localStorage\r\n      localStorage.setItem('token', token);\r\n      \r\n      // Get user profile\r\n      const response = await authService.getProfile();\r\n      return response.user;\r\n    } catch (error: any) {\r\n      return rejectWithValue(error.response?.data?.error || 'SSO login failed');\r\n    }\r\n  }\r\n);\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    clearError: (state) => {\r\n      state.error = null;\r\n    },\r\n    setToken: (state, action: PayloadAction<string>) => {\r\n      state.token = action.payload;\r\n      state.isAuthenticated = true;\r\n      localStorage.setItem('token', action.payload);\r\n    },\r\n    clearToken: (state) => {\r\n      state.token = null;\r\n      state.isAuthenticated = false;\r\n      localStorage.removeItem('token');\r\n    },\r\n    updateUser: (state, action: PayloadAction<Partial<User>>) => {\r\n      if (state.user) {\r\n        state.user = { ...state.user, ...action.payload };\r\n      }\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Login\r\n      .addCase(login.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(login.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.isAuthenticated = true;\r\n        state.user = action.payload.user;\r\n        state.token = action.payload.token;\r\n        state.error = null;\r\n      })\r\n      .addCase(login.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Register\r\n      .addCase(register.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(register.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.isAuthenticated = true;\r\n        state.user = action.payload.user;\r\n        state.token = action.payload.token;\r\n        state.error = null;\r\n      })\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Get Profile\r\n      .addCase(getProfile.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getProfile.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.user = action.payload;\r\n        state.error = null;\r\n      })\r\n      .addCase(getProfile.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Update Profile\r\n      .addCase(updateProfile.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateProfile.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.user = action.payload;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateProfile.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Change Password\r\n      .addCase(changePassword.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(changePassword.fulfilled, (state) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.error = null;\r\n      })\r\n      .addCase(changePassword.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      })\r\n      // Logout\r\n      .addCase(logout.fulfilled, (state) => {\r\n        state.user = null;\r\n        state.token = null;\r\n        state.isAuthenticated = false;\r\n        state.error = null;\r\n      })\r\n      // Staff Login\r\n      .addCase(staffLogin.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.isAuthenticated = true;\r\n        state.user = action.payload.user;\r\n        state.token = action.payload.token;\r\n        state.error = null;\r\n      })\r\n      // SSO Login\r\n      .addCase(ssoLogin.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(ssoLogin.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.loading = false;\r\n        state.isAuthenticated = true;\r\n        state.user = action.payload;\r\n        state.token = localStorage.getItem('token');\r\n        state.error = null;\r\n      })\r\n      .addCase(ssoLogin.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload as string;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { clearError, setToken, clearToken, updateUser } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}